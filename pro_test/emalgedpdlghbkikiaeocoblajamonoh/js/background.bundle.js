!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,o){r.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}({0:function(e,t,n){n(126),e.exports=n(715)},3:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},9:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.browserRuntime=t.browserSendGlobalMessage=t.browserSendMessageToActiveTab=t.browserSendMessage=t.stBrowser=void 0;var o=n(34),i=r(o),a=n(10),s=r(a),u=void 0,c="";"undefined"!=typeof chrome?(t.stBrowser=u=chrome,c="chrome"):(c="safari",t.stBrowser=u={browserAction:{onClicked:{addListener:function(e){safari.application.addEventListener("command",function(t){"shoptagr-tag"!==t.target.identifier&&e()},!0)}}},tabs:{sendMessage:function(e,t,n){u.tabs.get(e,function(e){var r=t.name||"message";if(n){var o="#{messageName} callBack "+new Date;e.page.addEventListener("message",function t(r){r.name===o&&(e.page.removeEventListener("message",t,!1),n(r.message))},!1)}e.page.dispatchMessage(r,t)})},onReplaced:{addListener:function(){}},onUpdated:{addListener:function(e){safari.application.addEventListener("open",function(t){var n=t.target.id;n&&e(n)},!0)}},onRemoved:{addListener:function(e){safari.application.addEventListener("close",function(t){var n=t.target.id;n&&e(n)},!0)}},create:function(e,t){console.log("OPEN TAB SAFARI");var n="undefined"==typeof e.active||e.active?"foreground":"background",r=safari.application.activeBrowserWindow.openTab(n);r.url=e.url,r.id=Math.floor(1e5*Math.random()),"function"==typeof t&&t(r)},remove:function(e){console.log("CLOSE TAB SAFARI");var t=safari.application.activeBrowserWindow.tabs.filter(function(t){return t.id&&t.id==e});1===t.length&&t[0].close()},get:function(e,t){var n,r,o;safari.application.browserWindows.some(function(t,o){return r=o,t.tabs.some(function(t,r){return n=r,e===t.id})}),void 0!==r&&void 0!==n&&(o=safari.application.browserWindows[r].tabs[n],o.index=n,o.windowId=r),t(o)},highlight:function(e){safari.application.browserWindows[e.windowId].tabs[e.tabs].activate()},reload:function(){var e=safari.application.activeBrowserWindow.activeTab;e.url=e.url}},runtime:{onUpdateAvailable:{addListener:function(){}},setUninstallURL:function(e){},onInstalled:{addListener:function(e){}},onMessage:{listeners:{},addListener:function(e){console.log("Register runtime onMessage addListener");var t=function(e){return function(t){console.log("onMessage.addListetener Handler-> ",t);var n=(t.target.page?t.target.page:safari.self.tab,{}),r=function(){return null};t.name.indexOf("callBack")===-1&&t.callbackName&&(r=function(e){t.target.page.dispatchMessage(t.callbackName,{name:t.callbackName,data:e})}),n.tab=t.target.page?t.target:void 0,n.tab&&(n.tab.id=t.target.id);var o={};o.data=t.message.data||{},o.name=t.message.name||t.name,e(o,n,r)}}(e),n=function e(){var t=Math.floor(1e5*Math.random());return u.runtime.onMessage.listeners[t]?e():t}();u.runtime.onMessage.listeners[n]=t,e.msgHandlerID=n,safari.self.addEventListener?(console.log(safari),console.log("Add first type event listener"),safari.self.addEventListener("message",t,!1)):(console.log(safari),console.log("Add second type event listener"),safari.application.addEventListener("message",t,!1))},removeListener:function(e){var t=e.msgHandlerID,n=u.runtime.onMessage.listeners[t];return n?(safari.self.addEventListener?(console.log(safari),console.log("Remove first type event listener"),safari.self.removeEventListener("message",n,!1)):(console.log(safari),console.log("Remove second type event listener"),safari.application.removeEventListener("message",n,!1)),void delete u.runtime.onMessage.listeners[t]):void console.error("Listener with the id "+t+" does not exist (browserShim.js)")}},sendMessage:function(e,t){var n="noCallBack";console.log("send browserMessage ---> ",e),t&&(n="callBack_"+e.name+"_"+new Date,safari.self.addEventListener("message",function e(r){r.name===n&&(console.log("Received data back for callback "+n+" ",r.message),safari.self.removeEventListener("message",e,!1),t(r.message.data))},!1),e.callbackName=n),safari.self.tab.dispatchMessage(e.name,e)},onConnect:{addListener:function(e){e({onMessage:{addListener:function(e){u.runtime.onMessage.addListener(e)}}})}}},extension:{getURL:function(e){return(safari.extension.baseURI+e).replace("//js/","/js/")}}});var l={tabStId:null,init:function(e){this.tabStId=e},sendMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];if(!e)return console.error("Name is not defined (browserRuntime.sendMessage, browserShim.js)"),null;var r=(0,s.default)({},t,{tabStId:this.tabStId});return new i.default(function(t){u.runtime.sendMessage({name:e,data:r},function(e){"function"==typeof n&&n(e),t(e)})})}},f=function(e,t,n){u.runtime.sendMessage({name:e,data:t},n)},d=function(e,t){"safari"==c?safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("message",{name:e,data:t}):u.tabs.query({active:!0},function(n){var r={name:e,data:t},o=void 0;n.forEach(function(t){u.tabs.sendMessage(t.id,r),o=u.tabs.connect(t.id,{name:e}),console.log("Post message to tab",t),o.postMessage(r)})})},h=function(e,t){"safari"==c?safari.application.activeBrowserWindow.tabs.forEach(function(n){n&&n.page&&n.page.dispatchMessage&&n.page.dispatchMessage(e,{data:t,name:e})}):u.tabs.query({},function(n){n.forEach(function(n){u.tabs.sendMessage(n.id,{name:e,data:t})})})};t.stBrowser=u,t.browserSendMessage=f,t.browserSendMessageToActiveTab=d,t.browserSendGlobalMessage=h,t.browserRuntime=l},10:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(127),i=r(o);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},11:function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},13:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},14:function(e,t,n){var r=n(64)("wks"),o=n(60),i=n(13).Symbol,a="function"==typeof i,s=e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))};s.store=r},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={NODE_ENV:"production",API_URL:"https://api-beta.shoptagr.com/v2",WEBSITE_PATH:"https://www.shoptagr.com",WEBSOCKETS_PATH:"wss://api-beta.shoptagr.com/cable",FACEBOOK_APP_ID:"1420933254790757",SESSIONS_API_URL:"https://api-beta.shoptagr.com/track",GOOGLE_ANALYTICS_ID:"UA-43311057-5",PLATFORM_VERSION:"1.9.9.25",PAYPAL_APP_ID:"Ae80lrr2SXeJhSJ8uAdibjmilJ2L_xPcbwG7fd6COvIsYuuLPN4YIeRREuUdXHsky_vCaWK4xRmH3LA5",PAYPAL_CONNECT_URL:"https://www.paypal.com/connect"},o=t.API_URL=r.API_URL.endsWith("/")?r.API_URL.slice(0,-1):r.API_URL,i=t.WEBSITE_PATH=r.WEBSITE_PATH.endsWith("/")?r.WEBSITE_PATH.slice(0,-1):r.WEBSITE_PATH;t.SUPPORTED_STORES_PATH=i+"/supported_stores",t.HOW_IT_WORKS_PATH=i+"/how-it-works",t.WALLET_PATH=i+"/wallet",t.ASSETS_URL="https://s3-us-west-2.amazonaws.com/shoptagr-extension-assets",t.LOGIN_URL=o+"/sessions/email_login",t.SIGNUP_URL=o+"/sign_up",t.USER_PROFILE_URL=o+"/user/profile",t.USER_UPDATE_URL=o+"/user/update",t.USER_FAVORITES_URL=o+"/rules/favorite_stores",t.RULES_URL=o+"/rules",t.TAGS_URL=o+"/tags",t.LISTS_URL=o+"/lists",t.EXTENSION_URL=o+"/sessions/extension_token",t.SHOP_OFFERS_URL=o+"/shop_offers",t.MISSING_STORE=o+"/stores/missing_store",t.BROKEN_STORE=o+"/stores/broken",t.FEATURES_URL=o+"/configuration/extension/features",t.EXTENSION_STATE_URL=o+"/configuration/extension/state",t.VERSION_URL=o+"/configuration/extension/version",t.TRACK_EVENT_URL=o+"/track/event",t.RESET_PASSWORD_URL=o+"/user/reset_password",t.CURRENCY_URL=o+"/user/available_currencies",t.STORES_URL=o+"/stores",t.CJ_DOMAINS_URL=o+"/configuration/cj_domains",t.GUEST_SIGN_UP=o+"/guest_sign_up",t.LATEST_OFFERS_URL=o+"/latest/shop_offers",t.PAYPAL_CONNECT_URL=o+"/plus/paypal_connect",t.CASHBACKS_URL=o+"/plus/cashbacks",t.PAYOUTS_URL=o+"/plus/payouts",t.WITHDRAW_URL=o+"/plus/withdraw",t.CB_STORES_PATH=o+"/rules/mobile_stores"},17:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){l.default.interceptors.request.eject(f),f=l.default.interceptors.request.use(function(t){return t.headers.common.Authorization="Bearer "+e(),t},function(e){return u.default.reject(e)}),l.default.defaults.headers.common["Content-Type"]="application/json"}function i(e,t){l.default.interceptors.response.use(function(e){return e},function(n){return"function"==typeof e&&(t?e(n):n.response&&401==n.response.status&&e()),u.default.reject(n)})}function a(e,t){l.default.defaults.headers.common["X-Platform"]=e,t&&(l.default.defaults.headers.common["X-Platform-Version"]=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PLATFORMS=void 0;var s=n(34),u=r(s);t.setAuthorizationToken=o,t.setUnauthorizedHandler=i,t.setPlatformHeader=a;var c=n(162),l=r(c),f=(t.PLATFORMS={web:"web",dashboard:"dashboard",extension:"extension",mobile:"mobile"},void 0);t.default=l.default},18:function(e,t,n){var r=n(13),o=n(11),i=n(30),a=n(26),s=n(31),u="prototype",c=function(e,t,n){var l,f,d,h=e&c.F,p=e&c.G,v=e&c.S,m=e&c.P,g=e&c.B,y=e&c.W,b=p?o:o[t]||(o[t]={}),w=b[u],_=p?r:v?r[t]:(r[t]||{})[u];p&&(n=t);for(l in n)f=!h&&_&&void 0!==_[l],f&&s(b,l)||(d=f?_[l]:n[l],b[l]=p&&"function"!=typeof _[l]?n[l]:g&&f?i(d,r):y&&_[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[u]=e[u],t}(d):m&&"function"==typeof d?i(Function.call,d):d,m&&((b.virtual||(b.virtual={}))[l]=d,e&c.R&&w&&!w[l]&&a(w,l,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},20:[1330,120,200],21:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(99),i=r(o);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},22:function(e,t,n){var r=n(27);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},23:function(e,t,n){e.exports=!n(35)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},24:function(e,t,n){var r=n(22),o=n(100),i=n(91),a=Object.defineProperty;t.f=n(23)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},26:function(e,t,n){var r=n(24),o=n(46);e.exports=n(23)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},27:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},30:function(e,t,n){var r=n(44);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},31:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},32:function(e,t){e.exports={}},34:function(e,t,n){e.exports={default:n(131),__esModule:!0}},35:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},36:function(e,t,n){var r=n(80),o=n(54);e.exports=function(e){return r(o(e))}},37:function(e,t,n){var r=n(54);e.exports=function(e){return Object(r(e))}},41:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(128),i=r(o);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},43:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},44:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},45:function(e,t){e.exports=!0},46:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},48:function(e,t,n){var r=n(102),o=n(62);e.exports=Object.keys||function(e){return r(e,o)}},50:function(e,t,n){var r=n(24).f,o=n(31),i=n(14)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},54:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},55:function(e,t,n){var r=n(27),o=n(13).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},56:function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=o(t),this.reject=o(n)}var o=n(44);e.exports.f=function(e){return new r(e)}},57:function(e,t,n){var r=n(64)("keys"),o=n(60);e.exports=function(e){return r[e]||(r[e]=o(e))}},58:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},59:function(e,t,n){var r=n(58),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},60:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},61:function(e,t,n){"use strict";var r=n(145)(!0);n(83)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},62:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},63:function(e,t){t.f={}.propertyIsEnumerable},64:function(e,t,n){var r=n(11),o=n(13),i="__core-js_shared__",a=o[i]||(o[i]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(45)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},66:[1330,494,589],69:function(e,t,n){e.exports={default:n(194),__esModule:!0}},70:function(e,t,n){e.exports=n(190)},71:function(e,t,n){var r=n(43),o=n(14)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},72:function(e,t,n){var r=n(71),o=n(14)("iterator"),i=n(32);e.exports=n(11).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},78:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},79:function(e,t,n){var r=n(13).document;e.exports=r&&r.documentElement},80:function(e,t,n){var r=n(43);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},81:function(e,t,n){var r=n(32),o=n(14)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},82:function(e,t,n){var r=n(22);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},83:function(e,t,n){"use strict";var r=n(45),o=n(18),i=n(103),a=n(26),s=n(32),u=n(138),c=n(50),l=n(101),f=n(14)("iterator"),d=!([].keys&&"next"in[].keys()),h="@@iterator",p="keys",v="values",m=function(){return this};e.exports=function(e,t,n,g,y,b,w){u(n,t,g);var _,S,x,k=function(e){if(!d&&e in E)return E[e];switch(e){case p:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},A=t+" Iterator",I=y==v,T=!1,E=e.prototype,O=E[f]||E[h]||y&&E[y],P=O||k(y),L=y?I?k("entries"):P:void 0,C="Array"==t?E.entries||O:O;if(C&&(x=l(C.call(new e)),x!==Object.prototype&&x.next&&(c(x,A,!0),r||"function"==typeof x[f]||a(x,f,m))),I&&O&&O.name!==v&&(T=!0,P=function(){return O.call(this)}),r&&!w||!d&&!T&&E[f]||a(E,f,P),s[t]=P,s[A]=m,y)if(_={values:I?P:k(v),keys:b?P:k(p),entries:L},w)for(S in _)S in E||i(E,S,_[S]);else o(o.P+o.F*(d||T),t,_);return _}},84:function(e,t,n){var r=n(14)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},85:function(e,t,n){var r=n(22),o=n(142),i=n(62),a=n(57)("IE_PROTO"),s=function(){},u="prototype",c=function(){var e,t=n(55)("iframe"),r=i.length,o="<",a=">";for(t.style.display="none",n(79).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+a+"document.F=Object"+o+"/script"+a),e.close(),c=e.F;r--;)delete c[u][i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=c(),void 0===t?n:o(n,t)}},86:function(e,t){t.f=Object.getOwnPropertySymbols},87:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},88:function(e,t,n){var r=n(22),o=n(27),i=n(56);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e),a=n.resolve;return a(t),n.promise}},89:function(e,t,n){var r=n(22),o=n(44),i=n(14)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},90:function(e,t,n){var r,o,i,a=n(30),s=n(137),u=n(79),c=n(55),l=n(13),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},w=function(e){b.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete g[e]},"process"==n(43)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(o=new p,i=o.port2,o.port1.onmessage=w,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",w,!1)):r=y in c("script")?function(e){u.appendChild(c("script"))[y]=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:h}},91:function(e,t,n){var r=n(27);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},92:function(e,t,n){n(151);for(var r=n(13),o=n(26),i=n(32),a=n(14)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&o(f,a,c),i[c]=i.Array}},94:function(e,t,n){(function(t){"use strict";function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(116):"undefined"!=typeof t&&(e=n(116)),e}var i=n(20),a=n(356),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:o(),transformRequest:[function(e,t){return a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(106))},99:function(e,t,n){e.exports={default:n(129),__esModule:!0}},100:function(e,t,n){e.exports=!n(23)&&!n(35)(function(){return 7!=Object.defineProperty(n(55)("div"),"a",{get:function(){return 7}}).a})},101:function(e,t,n){var r=n(31),o=n(37),i=n(57)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},102:function(e,t,n){var r=n(31),o=n(36),i=n(134)(!1),a=n(57)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},103:function(e,t,n){e.exports=n(26)},104:function(e,t){},106:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=o(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},113:function(e,t,n){var r=n(18),o=n(11),i=n(35);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},116:function(e,t,n){"use strict";var r=n(20),o=n(348),i=n(351),a=n(357),s=n(355),u=n(119),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(350);e.exports=function(e){return new Promise(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",g=e.auth.password||"";d.Authorization="Basic "+c(m+":"+g)}if(h.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,i={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};o(t,l,i),h=null}},h.onerror=function(){l(u("Network Error",e,null,h)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var y=n(353),b=(e.withCredentials||s(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in h&&r.forEach(d,function(e,t){"undefined"==typeof f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===f&&(f=null),h.send(f)})}},117:function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},118:function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},119:[1322,347],120:function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},126:function(e,t,n){"use strict";var r=n(9);n.p=r.stBrowser.extension.getURL("/js/")},127:function(e,t,n){e.exports={default:n(130),__esModule:!0}},128:function(e,t,n){e.exports={default:n(193),__esModule:!0}},129:function(e,t,n){n(61),n(150),e.exports=n(11).Array.from},130:function(e,t,n){n(152),e.exports=n(11).Object.assign},131:function(e,t,n){n(104),n(61),n(92),n(153),n(154),n(155),e.exports=n(11).Promise},132:function(e,t){e.exports=function(){}},133:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},134:function(e,t,n){var r=n(36),o=n(59),i=n(146);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=o(u.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},135:function(e,t,n){"use strict";var r=n(24),o=n(46);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},136:function(e,t,n){var r=n(30),o=n(82),i=n(81),a=n(22),s=n(59),u=n(72),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,g=d?function(){return e}:u(e),y=r(n,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(i(g)){for(h=s(e.length);h>b;b++)if(m=t?y(a(p=e[b])[0],p[1]):y(e[b]),m===c||m===l)return m}else for(v=g.call(e);!(p=v.next()).done;)if(m=o(v,y,p.value,t),m===c||m===l)return m};t.BREAK=c,t.RETURN=l},137:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},138:function(e,t,n){"use strict";var r=n(85),o=n(46),i=n(50),a={};n(26)(a,n(14)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},139:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},140:function(e,t,n){var r=n(13),o=n(90).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(43)(a);e.exports=function(){var e,t,n,c=function(){var r,o;for(u&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!i||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){o.call(r,c)};else{var f=!0,d=document.createTextNode("");new i(c).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},141:function(e,t,n){"use strict";var r=n(23),o=n(48),i=n(86),a=n(63),s=n(37),u=n(80),c=Object.assign;e.exports=!c||n(35)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,l=1,f=i.f,d=a.f;c>l;)for(var h,p=u(arguments[l++]),v=f?o(p).concat(f(p)):o(p),m=v.length,g=0;m>g;)h=v[g++],r&&!d.call(p,h)||(n[h]=p[h]);return n}:c},142:function(e,t,n){var r=n(24),o=n(22),i=n(48);e.exports=n(23)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},143:function(e,t,n){var r=n(26);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},144:function(e,t,n){"use strict";var r=n(13),o=n(11),i=n(24),a=n(23),s=n(14)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},145:function(e,t,n){var r=n(58),o=n(54);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},146:function(e,t,n){var r=n(58),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},147:function(e,t,n){var r=n(13),o=r.navigator;e.exports=o&&o.userAgent||""},150:function(e,t,n){"use strict";var r=n(30),o=n(18),i=n(37),a=n(82),s=n(81),u=n(59),c=n(135),l=n(72);o(o.S+o.F*!n(84)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,f,d=i(e),h="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,y=l(d);if(m&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(t=u(d.length),n=new h(t);t>g;g++)c(n,g,m?v(d[g],g):d[g]);else for(f=y.call(d),n=new h;!(o=f.next()).done;g++)c(n,g,m?a(f,v,[o.value,g],!0):o.value);return n.length=g,n}})},151:function(e,t,n){"use strict";var r=n(132),o=n(139),i=n(32),a=n(36);e.exports=n(83)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},152:function(e,t,n){var r=n(18);r(r.S+r.F,"Object",{assign:n(141)})},153:function(e,t,n){"use strict";var r,o,i,a,s=n(45),u=n(13),c=n(30),l=n(71),f=n(18),d=n(27),h=n(44),p=n(133),v=n(136),m=n(89),g=n(90).set,y=n(140)(),b=n(56),w=n(87),_=n(147),S=n(88),x="Promise",k=u.TypeError,A=u.process,I=A&&A.versions,T=I&&I.v8||"",E=u[x],O="process"==l(A),P=function(){},L=o=b.f,C=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(14)("species")]=function(e){e(P,P)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==T.indexOf("6.6")&&_.indexOf("Chrome/66")===-1}catch(e){}}(),R=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a,s=o?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(o||(2==e._h&&B(e),
e._h=1),s===!0?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(k("Promise-chain cycle")):(i=R(n))?i.call(n,u,c):u(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){g.call(u,function(){var t,n,r,o=e._v,i=M(e);if(i&&(t=w(function(){O?A.emit("unhandledRejection",o,e):(n=u.onunhandledrejection)?n({promise:e,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=O||M(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){g.call(u,function(){var t;O?A.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=R(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,c(U,r,1),c(N,r,1))}catch(e){N.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){N.call({_w:n,_d:!1},e)}}};C||(E=function(e){p(this,E,x,"_h"),h(e),r.call(this);try{e(c(U,this,1),c(N,this,1))}catch(e){N.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(143)(E.prototype,{then:function(e,t){var n=L(m(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?A.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=c(U,e,1),this.reject=c(N,e,1)},b.f=L=function(e){return e===E||e===a?new i(e):o(e)}),f(f.G+f.W+f.F*!C,{Promise:E}),n(50)(E,x),n(144)(x),a=n(11)[x],f(f.S+f.F*!C,x,{reject:function(e){var t=L(this),n=t.reject;return n(e),t.promise}}),f(f.S+f.F*(s||!C),x,{resolve:function(e){return S(s&&this===a?E:this,e)}}),f(f.S+f.F*!(C&&n(84)(function(e){E.all(e).catch(P)})),x,{all:function(e){var t=this,n=L(t),r=n.resolve,o=n.reject,i=w(function(){var n=[],i=0,a=1;v(e,!1,function(e){var s=i++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=L(t),r=n.reject,o=w(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},154:function(e,t,n){"use strict";var r=n(18),o=n(11),i=n(13),a=n(89),s=n(88);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},155:function(e,t,n){"use strict";var r=n(18),o=n(56),i=n(87);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},162:[1318,342],168:function(e,t,n){e.exports={default:n(192),__esModule:!0}},169:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(34),i=r(o);t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,n){function r(o,a){try{var s=t[o](a),u=s.value}catch(e){return void n(e)}return s.done?void e(u):i.default.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}},181:function(e,t){"use strict";function n(){var e=!!document.documentMode,t=!e&&!!window.StyleMedia,n="undefined"!=typeof InstallTrigger,r=!!window.opr&&!!window.opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,o=!!window.chrome&&navigator.userAgent.toLowerCase().indexOf("googlebot")===-1,i=!o&&navigator.userAgent.toLowerCase().indexOf("safari")!==-1,a=(o||r)&&!!window.CSS,s=navigator.userAgent.toLowerCase().indexOf("googlebot")!==-1;return e?"ie":t?"edge":n?"firefox":r?"opera":o?"chrome":i?"safari":a?"blink":s?"googlebot":"unknown"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},190:function(e,t,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(191),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},191:function(e,t){!function(t){"use strict";function n(e,t,n,r){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),s=new h(r||[]);return a._invoke=c(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(n,o,i,a){var s=r(e[n],e,o);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(c).then(function(e){u.value=e,i(u)},a)}a(s.arg)}function n(e,n){function r(){return new Promise(function(r,o){t(e,n,r,o)})}return o=o?o.then(r,r):r()}var o;this._invoke=n}function c(e,t,n){var o=A;return function(i,a){if(o===T)throw new Error("Generator is already running");if(o===E){if("throw"===i)throw a;return v()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===O)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===A)throw o=E,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=T;var c=r(e,t,n);if("normal"===c.type){if(o=n.done?E:I,c.arg===O)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=E,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,l(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,O;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,O):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:m,done:!0}}var m,g=Object.prototype,y=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",x="object"==typeof e,k=t.regeneratorRuntime;if(k)return void(x&&(e.exports=k));k=t.regeneratorRuntime=x?e.exports:{},k.wrap=n;var A="suspendedStart",I="suspendedYield",T="executing",E="completed",O={},P={};P[w]=function(){return this};var L=Object.getPrototypeOf,C=L&&L(L(p([])));C&&C!==g&&y.call(C,w)&&(P=C);var R=a.prototype=o.prototype=Object.create(P);i.prototype=R.constructor=a,a.constructor=i,a[S]=i.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(R),e},k.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[_]=function(){return this},k.AsyncIterator=u,k.async=function(e,t,r,o){var i=new u(n(e,t,r,o));return k.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},s(R),R[S]="Generator",R[w]=function(){return this},R.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},k.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=y.call(o,"catchLoc"),s=y.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,O):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;d(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=m),O}}}(function(){return this}()||Function("return this")())},192:function(e,t,n){var r=n(11),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},193:function(e,t,n){n(196);var r=n(11).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},194:function(e,t,n){n(197),e.exports=n(11).Object.keys},196:function(e,t,n){var r=n(18);r(r.S+r.F*!n(23),"Object",{defineProperty:n(24).f})},197:function(e,t,n){var r=n(37),o=n(48);n(113)("keys",function(){return function(e){return o(r(e))}})},200:function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},342:[1319,20,120,344,94,117,343,118,358],343:[1320,117],344:function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(94),i=n(20),a=n(345),s=n(346);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},345:[1321,20],346:[1323,20,349,118,94,354,352],347:function(e,t){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},348:[1324,119],349:[1325,20],350:function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function r(e){for(var t,r,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if(r=i.charCodeAt(s+=.75),r>255)throw new n;t=t<<8|r}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},351:function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(20);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}},352:function(e,t){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},353:[1326,20],354:function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},355:[1327,20],356:[1328,20],357:[1329,20],358:function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},367:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t={event_name:e.eventName,user_id:e.userId,location:e.location,referrer:e.referrer,event_id:e.event_id||null};return a.default.post("https://api-beta.shoptagr.com/track/funnel_visits/track",t,{timeout:s})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(162),a=r(i),s=3e3;e.exports=t.default},392:function(e,t,n){(function(t){"use strict";function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function o(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(490):"undefined"!=typeof t&&(e=n(490)),e}var i=n(66),a=n(586),s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:o(),transformRequest:[function(e,t){return a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(106))},490:function(e,t,n){"use strict";var r=n(66),o=n(579),i=n(581),a=n(587),s=n(585),u=n(493);e.exports=function(e){return new Promise(function(t,c){var l=e.data,f=e.headers;r.isFormData(l)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",p=e.auth.password||"";f.Authorization="Basic "+btoa(h+":"+p)}if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?d.response:d.responseText,i={data:r,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};o(t,c,i),d=null}},d.onerror=function(){c(u("Network Error",e,null,d)),d=null},d.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var v=n(583),m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;m&&(f[e.xsrfHeaderName]=m)}if("setRequestHeader"in d&&r.forEach(f,function(e,t){"undefined"==typeof l&&"content-type"===t.toLowerCase()?delete f[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),c(e),d=null)}),void 0===l&&(l=null),d.send(l)})}},491:117,492:118,493:[1322,578],494:120,495:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lastId,n=e.page,r={last_id:t||"",page:n||1};return _.default.get(S.STORES_URL+"/supported_stores",{params:r}).then(function(e){var t=e.data;return t.supported_stores})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lastId,n=e.timestamp,r=e.page,o={last_id:t||"",page:r||1,timestamp:n||""};return _.default.get(S.STORES_URL+"/supported_stores/updated",{params:o}).then(function(e){var t=e.data;return t.updated_stores})}function a(e){var t=e.lastId||"",n=e.timestamp||"";return _.default.get(S.STORES_URL+"/supported_stores/page_count?last_id="+t+"&timestamp="+n).then(function(r){var a=r.data,s=[],u="write"===e.type?a.page_count:a.updated_page_count,c=void 0,l=1;for(l;l<=u;l+=1)c="write"===e.type?o({lastId:t,page:l}):i({lastId:t,timestamp:n,page:l}),s.push(c);return g.default.all(s)}).then(function(e){return e.length?e.reduce(function(e,t){return e.concat(t)},[]):null})}function s(){return A.supported.count().then(function(e){return e>0?A.supported.orderBy("id").last().then(function(e){var t=e.id;return a({lastId:t,type:"write"})}):a({type:"write"})}).then(function(e){e&&e.length&&A.transaction("rw",A.supported,function(){e.forEach(function(e){A.supported.add(e)})})}).catch(console.error)}function u(){var e=localStorage.getItem("lastUpdateShortRules");return e?A.supported.count().then(function(t){return t>0?A.supported.orderBy("id").last().then(function(t){var n=t.id;return a({lastId:n,timestamp:e,type:"update"})}):g.default.resolve()}).then(function(e){e&&e.length&&A.transaction("rw",A.supported,function(){var t=[];return e.forEach(function(e){var n=e.id,r=(0,v.default)(e,["id"]);t.push(A.supported.update(n,r))}),g.default.all(t)}).then(function(){localStorage.setItem("lastUpdateShortRules",String((new Date).getTime()))})}).catch(console.error):(localStorage.setItem("lastUpdateShortRules",String((new Date).getTime())),A.supported.clear())}function c(){A.isOpen()?u().then(s):(A.on("ready",c),A.open())}function l(){A.version(2).stores({supported:"id,domain,url_regex",full:"id,domain,url_regex"}),A.open()}function f(e){return fetch(e).then(function(e){return e.text()}).then(function(e){return JSON.parse(e)})}function d(e){function t(){var t=e[o];f(x.stBrowser.extension.getURL("/rules/rule_"+t+".json")).then(function(e){return A.transaction("rw",A.full,function(){A.full.add(e)})}).then(function(){i-=1}),i+=1,o+=1}function n(){for(;i<a;){if(o>=e.length){A.full.count().then(function(e){return console.log("Number of full rules in db: "+e+" (rulesDB.js)")}),clearInterval(r);break}t()}}console.log("Number of rules id: "+e.length+" (rulesDB.js)");var r=null,o=0,i=0,a=50;n(),r=setInterval(n,50)}function h(){A.isOpen()?A.full.count().then(function(e){return e>0?A.full.clear():g.default.resolve()}).then(function(){d(k)}).catch(console.error):(A.on("ready",h),l())}Object.defineProperty(t,"__esModule",{value:!0}),t.initAndUpdateRulesDB=t.moveJsonToRulesDatabase=t.initShortRulesDatabase=t.rulesDB=void 0;var p=n(78),v=r(p),m=n(34),g=r(m),y=n(738),b=r(y),w=n(17),_=r(w),S=n(16),x=n(9),k=n(721),A=new b.default("rulesDB");A.version(1).stores({supported:"id,domain,url_regex"}),t.rulesDB=A,t.initShortRulesDatabase=c,t.moveJsonToRulesDatabase=h,t.initAndUpdateRulesDB=l},498:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=JSON.parse(localStorage.getItem("CJDomains")||"[]");return[].concat((0,l.default)(t),p).reduce(function(t,n){return t||new RegExp(decodeURIComponent(n.replace(/^%3F/,"\\?")),"i").test(e)},!1)}function i(){f.stBrowser.tabs.onRemoved.addListener(function(e){d[e]&&(delete d[e],console.log("CJ tab has been deleted",d))})}function a(e){return g.some(function(t){return new RegExp(t).test(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.initFirefoxCJListener=t.initCJListener=t.tabsCJ=void 0;var s=n(69),u=r(s),c=n(21),l=r(c),f=n(9),d={},h=["www.worldmarket.com"],p=["linksynergy","afsrc=1","affiliate.rakuten.com"],v=18e5,m=72e5,g=[/fsARr.+SVBGE/g,/TnL5HPStwNw/g,/9089003/g,/7594989/g,/9089004/g,/shoptagr/gi],y=function(){f.stBrowser.webRequest.onBeforeRequest.addListener(function(e){var t=e.initiator,n=e.url,r=e.tabId,i=new URL(t||n),s=i.host;void 0!==d[r]||h.includes(s)||!o(n)||a(n)||(d[r]="",console.log("Match was found with CJ domain",e,d))},{urls:["<all_urls>"],types:["main_frame","sub_frame"]}),f.stBrowser.tabs.onUpdated.addListener(function(e,t,n){var r=new URL(n.url),i=r.host,s=i.split(".").slice(-2).join(".");""!==d[e]||o(n.url)?(d[e]&&d[e]!==s||void 0!==d[e]&&a(n.url))&&(delete d[e],console.log("CJ tab has been deleted",n,d)):(d[e]=s,console.log("There was a redirect from CJ domain",n,d))}),i()},b=function(){f.stBrowser.webRequest.onBeforeRequest.addListener(function(e){var t=e.initiator,n=e.url,r=e.tabId,i=new URL(t||n),s=i.host;void 0!==d[r]||h.includes(s)||!o(n)||a(n)||(d[r]={createdAt:Date.now()},console.log("There was a redirect from CJ domain",e,d))},{urls:["<all_urls>"],types:["main_frame","sub_frame"]}),f.stBrowser.tabs.onUpdated.addListener(function(e,t,n){d[e]&&a(n.url)&&(delete d[e],console.log("CJ tab has been deleted",n,d))}),i(),setInterval(function(){(0,u.default)(d).forEach(function(e){d[e].createdAt+m<=Date.now()&&(delete d[e],console.log("CJ tab has been deleted",d))})},v)};t.tabsCJ=d,t.initCJListener=y,t.initFirefoxCJListener=b},571:function(e,t,n){var r,o;(function(){var i=this;(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var t;return null==e&&(e=null!=(t=this.getConfig("url"))?t:this.INTERNAL.default_mount_path),new a.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return t=document.head.querySelector("meta[name='action-cable-"+e+"']"),null!=t?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?(t=document.createElement("a"),t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t,n;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),(n=this.logger).log.apply(n,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(i);var a=i.ActionCable;(function(){(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};a.ConnectionMonitor=function(){function t(t){this.connection=t,this.visibilityDidChange=e(this.visibilityDidChange,this),this.reconnectAttempts=0}var n,r,o;return t.pollInterval={min:3,max:30},t.staleThreshold=6,t.prototype.start=function(){if(!this.isRunning())return this.startedAt=r(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),a.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},t.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=r(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),a.log("ConnectionMonitor stopped")},t.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},t.prototype.recordPing=function(){return this.pingedAt=r()},t.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,a.log("ConnectionMonitor recorded connect")},t.prototype.recordDisconnect=function(){return this.disconnectedAt=r(),a.log("ConnectionMonitor recorded disconnect")},t.prototype.startPolling=function(){return this.stopPolling(),this.poll()},t.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},t.prototype.poll=function(){return this.pollTimeout=setTimeout(function(e){return function(){return e.reconnectIfStale(),e.poll()}}(this),this.getPollInterval())},t.prototype.getPollInterval=function(){var e,t,r,o;return o=this.constructor.pollInterval,r=o.min,t=o.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*n(e,r,t))},t.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return a.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+o(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?a.log("ConnectionMonitor skipping reopening recent disconnect"):(a.log("ConnectionMonitor reopening"),this.connection.reopen())},t.prototype.connectionIsStale=function(){var e;return o(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},t.prototype.disconnectedRecently=function(){return this.disconnectedAt&&o(this.disconnectedAt)<this.constructor.staleThreshold},t.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout(function(e){return function(){if(e.connectionIsStale()||!e.connection.isOpen())return a.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}}(this),200)},r=function(){return(new Date).getTime()},o=function(e){return(r()-e)/1e3},n=function(e,t,n){return Math.max(t,Math.min(n,e))},t}()}).call(this),function(){var e,t,n,r,o,i,s=[].slice,u=function(e,t){return function(){return e.apply(t,arguments)}},c=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=a.INTERNAL,t=r.message_types,n=r.protocols,o=2<=n.length?s.call(n,0,e=n.length-1):(e=0,[]),i=n[e++],a.Connection=function(){function e(e){this.consumer=e,this.open=u(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new a.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(a.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(a.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+n),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new a.WebSocket(this.consumer.url,n),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t,n;if(t=(null!=e?e:{allowReconnect:!0}).allowReconnect,t||this.monitor.stop(),this.isActive())return null!=(n=this.webSocket)?n.close():void 0},e.prototype.reopen=function(){var e;if(a.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(t){return e=t,a.log("Failed to reopen WebSocket",e)}finally{a.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),c.call(o,e)>=0},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?s.call(arguments,0):[],e=this.getState(),c.call(t,e)>=0},e.prototype.getState=function(){var e,t,n;for(t in WebSocket)if(n=WebSocket[t],n===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var n,r,o,i;if(this.isProtocolSupported())switch(o=JSON.parse(e.data),n=o.identifier,r=o.message,i=o.type,i){case t.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case t.ping:return this.monitor.recordPing();case t.confirmation:return this.subscriptions.notify(n,"connected");case t.rejection:return this.subscriptions.reject(n);default:return this.subscriptions.notify(n,"received",r)}},open:function(){if(a.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return a.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(e){if(a.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return a.log("WebSocket onerror event")}},e}()}.call(this),function(){var e=[].slice;a.Subscriptions=function(){function t(e){this.consumer=e,this.subscriptions=[]}return t.prototype.create=function(e,t){var n,r,o;return n=e,r="object"==typeof n?n:{channel:n},o=new a.Subscription(this.consumer,r,t),this.add(o)},t.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},t.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},t.prototype.reject=function(e){var t,n,r,o,i;for(r=this.findAll(e),o=[],t=0,n=r.length;t<n;t++)i=r[t],this.forget(i),this.notify(i,"rejected"),o.push(i);return o},t.prototype.forget=function(e){var t;return this.subscriptions=function(){var n,r,o,i;for(o=this.subscriptions,i=[],n=0,r=o.length;n<r;n++)t=o[n],t!==e&&i.push(t);return i}.call(this),e},t.prototype.findAll=function(e){var t,n,r,o,i;for(r=this.subscriptions,o=[],t=0,n=r.length;t<n;t++)i=r[t],i.identifier===e&&o.push(i);return o},t.prototype.reload=function(){var e,t,n,r,o;for(n=this.subscriptions,r=[],e=0,t=n.length;e<t;e++)o=n[e],r.push(this.sendCommand(o,"subscribe"));return r},t.prototype.notifyAll=function(){var t,n,r,o,i,a,s;for(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],i=this.subscriptions,a=[],r=0,o=i.length;r<o;r++)s=i[r],a.push(this.notify.apply(this,[s,n].concat(e.call(t))));return a},t.prototype.notify=function(){var t,n,r,o,i,a,s;for(a=arguments[0],n=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],s="string"==typeof a?this.findAll(a):[a],i=[],r=0,o=s.length;r<o;r++)a=s[r],i.push("function"==typeof a[n]?a[n].apply(a,t):void 0);return i},t.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,
identifier:n})},t}()}.call(this),function(){a.Subscription=function(){function e(e,n,r){this.consumer=e,null==n&&(n={}),this.identifier=JSON.stringify(n),t(this,r)}var t;return e.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},e.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},e.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},t=function(e,t){var n,r;if(null!=t)for(n in t)r=t[n],e[n]=r;return e},e}()}.call(this),function(){a.Consumer=function(){function e(e){this.url=e,this.subscriptions=new a.Subscriptions(this),this.connection=new a.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof e&&e.exports?e.exports=a:(r=a,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o)))}).call(this)},572:[1318,573],573:[1319,66,494,575,392,491,574,492,588],574:[1320,491],575:function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(392),i=n(66),a=n(576),s=n(577);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},576:[1321,66],577:[1323,66,580,492,392,584,582],578:347,579:[1324,493],580:[1325,66],581:function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(66);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}},582:352,583:[1326,66],584:354,585:[1327,66],586:[1328,66],587:[1329,66],588:358,589:function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},592:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3),i=r(o),a=n(17),s=r(a),u=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.messageObserver,o=n.url,a=n.handler;if((0,i.default)(this,e),this.fetch=function(){if(t.messageObserver.removeListener(t.listener),localStorage.getItem("token")){var e={headers:{"Cache-Control":"no-cache, no-store, must-revalidate"}};s.default.get(t.url,e).then(t.handler).catch(console.error)}else t.messageObserver.addListener(t.listener)},this.listener=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];localStorage.getItem("token")&&t.fetch(n)},!r||!o||!a)throw new Error("Missing required parameters: messageObserver: "+!r+", url: "+!o+", handler: "+!a);this.messageObserver=r,this.url=o,this.handler=a};t.default=u,e.exports=t.default},594:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(21),i=r(o),a=n(3),s=r(a),u=function e(){var t=this;(0,s.default)(this,e),this.addListener=function(e){t.listenersList=[].concat((0,i.default)(t.listenersList),[e])},this.removeListener=function(e){t.listenersList=t.listenersList.filter(function(t){return t!==e})},this.notifyListeners=function(e){t.listenersList.forEach(function(t){"function"==typeof t&&t(e)})},this.listenersList=[]};t.default=u,e.exports=t.default},595:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){clearTimeout(ke[e]),ke[e]=setTimeout(function(e){Ae[e]&&(delete ke[e],delete Ae[e])},1e4,e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"direct",t=Number(localStorage.getItem("lastTrackSession_"+e)),n=localStorage.getItem("token");(!t||(new Date).getTime()>=t+be)&&n&&(localStorage.setItem("lastTrackSession_"+e,String((new Date).getTime())),(0,Z.default)(e).then(function(e){e&&e.data&&e.data.id&&localStorage.setItem("sessionID",e.data.id)}))}function a(){var e={headers:{"X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}};re.default.get(le.CJ_DOMAINS_URL,e).then(function(e){localStorage.setItem("CJDomains",(0,V.default)(e.data.domains||[]))}).catch(console.error)}function s(){var e={headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Cache-Control":"no-cache, no-store, must-revalidate","X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}};re.default.get(le.FEATURES_URL,e).then(function(e){c("featuresReceived",{features:e.data}),localStorage.setItem("features",(0,V.default)(e.data))}).catch(console.error)}function u(){var e={headers:{"X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}};re.default.get(le.API_URL+"/rules/blocked_shop_offers",e).then(function(e){var t=e.data,n=(0,V.default)(t.domains);localStorage.setItem("blockedRetailers",n)}).catch(console.error)}function c(e,t){xe.notifyListeners(e),(0,se.browserSendGlobalMessage)(e,t)}function l(){if(localStorage.getItem("token")){var e={headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Cache-Control":"no-cache, no-store, must-revalidate","X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}};re.default.get(le.USER_PROFILE_URL,e).then(function(e){var t=e.data;localStorage.setItem("cashbackAvailable",(0,V.default)(t.cashback_available||!1)),localStorage.setItem("countryCode",t.country_code)}).catch(console.error)}}function f(){if(localStorage.getItem("associateUserWithXuid")&&localStorage.getItem("xuid")&&localStorage.getItem("token")){var e={headers:{Authorization:"Bearer "+localStorage.getItem("token"),"X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}};re.default.post(le.API_URL+"/extensions/user",{xuid:localStorage.getItem("xuid")},e).then(function(){localStorage.removeItem("associateUserWithXuid")}).catch(console.error)}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={token:t.token||null,user_id:t.user_id||null,user_token:t.user_token||null,receivedToken:t.receivedToken||!1};e?(xe.notifyListeners(),e(n)):c("resetApp",n)}function h(e){localStorage.setItem("token",e.token),localStorage.setItem("user_id",e.user_id),localStorage.setItem("user_token",e.user_token),f(),i(),Te.connect(),s(),l()}function p(e,t){if(localStorage.getItem("token"))return d(e,{token:localStorage.getItem("token"),user_id:localStorage.getItem("user_id"),user_token:localStorage.getItem("user_token"),receivedToken:!1}),!0;var n={},r={"Cache-Control":"no-cache, no-store, must-revalidate","X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"};localStorage.getItem("isFirstLogin")&&localStorage.getItem("xuid")&&(n.xuid=localStorage.getItem("xuid")),t&&(n.token=t),re.default.get(le.EXTENSION_URL,{params:n,headers:r}).then(function(t){var n=t.data;return console.log("ASK FOR TOKEN",n),n.token&&n.token.length&&(localStorage.removeItem("isFirstLogin"),h(n)),d(e,{token:n.token,user_id:n.user_id,user_token:n.user_token,receivedToken:!0}),!0}).catch(function(t){return console.error(t),d(e),!0})}function v(){localStorage.removeItem("cashbackAvailable"),localStorage.removeItem("countryCode"),localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_token"),s(),se.stBrowser.browserAction.setBadgeText({text:""}),Ie.fetch()}function m(){v(),Te.disconnect(),c("resetApp",{receivedToken:!1,token:null,user_id:null,user_token:null,logout:!0})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={headers:{"X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}},n=e.xuid,r=void 0===n?localStorage.getItem("xuid")||null:n,o=e.event,i=(e.tabStId,e.sendSessionID),a=(0,W.default)(e,["xuid","event","tabStId","sendSessionID"]),s={platform:"extension",event:o,options:a||[]};i&&localStorage.getItem("sessionID")&&(s.options.sessionID=localStorage.getItem("sessionID")),localStorage.getItem("token")?t.headers.Authorization="Bearer "+localStorage.getItem("token"):s.xuid=r,re.default.post(le.TRACK_EVENT_URL,s,t).catch(console.error)}function y(e,t){var n=e.autoClose?function(e){var t=e.id;return setTimeout(se.stBrowser.tabs.remove,15e3,t)}:function(){return null};if(e.currentTab)se.stBrowser.tabs.update(t.tab.id,{url:e.url,active:e.active});else{var r=e.autoClose?{index:0}:{};se.stBrowser.tabs.create((0,K.default)({url:e.url,active:e.active},r),n)}}function b(){return JSON.parse(localStorage.getItem("rules"))||[]}function w(e,t,n){if(console.log("received message ",e),e.name.startsWith("demo_")&&_(e,t,n),e.name.startsWith("closeTab_")){var r=e.name.replace("closeTab_","");se.stBrowser.tabs.query({},function(e){e.forEach(function(e){var t=e.url,n=e.id;r===t&&se.stBrowser.tabs.remove(n)})})}if("isLoggingEnabled"===e.name&&n({enable:!!localStorage.getItem("st__debug")}),"getUserData"===e.name){var a=localStorage.getItem("token"),s=JSON.parse(localStorage.getItem("cashbackAvailable"))||!1,u=localStorage.getItem("countryCode");n({cashbackAvailable:a?s:null,countryCode:a?u:null})}if("setClick"===e.name){var l=JSON.parse(localStorage.getItem("UIClicks"))||{},f=e.data.type;localStorage.setItem("UIClicks",(0,V.default)((0,K.default)({},l,(0,j.default)({},f,!0)))),n({})}if("getClick"===e.name){var d=JSON.parse(localStorage.getItem("UIClicks"))||{},b=e.data.type;n({clicked:!!d[b]})}if("trackSession"===e.name&&i(e.data.source),"checkShowReminder"===e.name){var w=(new Date).getDate(),S=JSON.parse(localStorage.getItem("features"))||{},x=e.data.domain,k=JSON.parse(localStorage.getItem("showReminder"))||{},A=!1;k.date&&k.date===w?(!k[x]||k[x]<S["reminder-tab"].times)&&(A=!0):A=!0,n({show:A})}if("reminderShowed"===e.name){var I=(new Date).getDate(),T=e.data.domain,E=JSON.parse(localStorage.getItem("showReminder"))||{};E.date&&E.date===I?E[T]?E[T]+=1:E[T]=1:E=(0,j.default)({date:I},T,1),localStorage.setItem("showReminder",(0,V.default)(E))}if("checkTabOnCJ"===e.name&&n({isCJ:!!me.tabsCJ[t.tab.id]}),"googleAnalytics"===e.name&&(console.log("googleAnalytics: ",e.data.event),window._gaq=window._gaq||[],window._gaq.push(e.data.event)),"checkApplyCouponsTooltip"===e.name&&n({show:(0,ge.checkAndSetItemDisplay)({name:"CouponsTooltipTimestamp",timeout:3*_e})}),"showInjectTooltip"===e.name&&n({show:(0,ge.checkAndSetItemDisplay)({name:"InjectTooltipTimestamp",timeout:3*_e})}),"showDragAndDropDemo"===e.name&&n({show:(0,ge.checkAndSetNextItemDisplay)({name:"nextDragAndDropDemoTimestamp",timeout:3*_e})}),"finishDragAndDropDemo"===e.name&&(0,ge.setNextItemDisplay)({name:"nextDragAndDropDemoTimestamp",timeout:Se}),"setDragAt"===e.name&&localStorage.setItem("dragAt",e.data.dragAt),"getDragAt"===e.name&&n({dragAt:localStorage.getItem("dragAt")}),"openBrowserTab"===e.name&&y(e.data,t),"updateBadge"===e.name){var O=e.data.text.toString();se.stBrowser.browserAction.setBadgeText({text:O.length>0?O:""}),se.stBrowser.browserAction.setBadgeBackgroundColor({color:"#6b56eb"})}if("markAsUnsupported"===e.name&&(se.stBrowser.browserAction.setIcon({path:{16:"img/icon-gray-128.png",48:"img/icon-gray-128.png",128:"img/icon-gray-128.png"},tabId:t.tab.id}),se.stBrowser.browserAction.setBadgeText({text:"",tabId:t.tab.id})),"setSaveAllTagsConfirm"===e.name&&localStorage.setItem("saveAllTagsConfirmed","true"),"getSaveAllTagsConfirm"===e.name&&n({confirmed:!!localStorage.getItem("saveAllTagsConfirmed")}),"cashbackActivateLater"===e.name){var P=localStorage.getItem("cashbackActivateLater")?JSON.parse(localStorage.getItem("cashbackActivateLater")):{};P[e.data.domain]=(new Date).getTime(),localStorage.setItem("cashbackActivateLater",(0,V.default)(P))}if("openReferralLink"===e.name){var L=localStorage.getItem("referralLinks")?JSON.parse(localStorage.getItem("referralLinks")):{},R=L[e.data.domain];(!R||R+_e<=(new Date).getTime())&&(y((0,K.default)({autoClose:!0,active:!1},e.data),t),L[e.data.domain]=(new Date).getTime(),localStorage.setItem("referralLinks",(0,V.default)(L)))}if("showReferralLink"===e.name){var D=localStorage.getItem("referralLinks")?JSON.parse(localStorage.getItem("referralLinks")):{},M=D[e.data.domain],B=e.data.period||_e,N=localStorage.getItem("cashbackActivateLater")?JSON.parse(localStorage.getItem("cashbackActivateLater")):{},U=N[e.data.domain],F=(new Date).getTime();n((!M||M+B<=F)&&(!U||U+4*we<=F)?{show:!0}:{show:!1})}if(e.name.startsWith("receiveToken")){var q=e.name.split("_"),J=(0,C.default)(q),W=(J[0],J.slice(1)),H=W.join("_");p(null,H)}if(["extension_logout","extensionLogout"].includes(e.name)&&m(),"getFeatures"===e.name&&n(localStorage.getItem("features")?{features:JSON.parse(localStorage.getItem("features"))}:{features:{}}),"getToken"===e.name){if(!localStorage.getItem("token"))return p(n),!0;n({token:localStorage.getItem("token"),user_id:localStorage.getItem("user_id"),user_token:localStorage.getItem("user_token")})}if("axios"===e.name){var X=(0,K.default)({},e.data.config,{headers:(0,K.default)({},e.data.config.headers,{Authorization:"Bearer "+localStorage.getItem("token"),"X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"})});return(0,re.default)(X).then(n).catch(n),!0}if("getXuid"===e.name&&localStorage.getItem("xuid")&&n({xuid:localStorage.getItem("xuid")}),"tabReload"===e.name&&se.stBrowser.tabs.reload(t.tab.id),"getBlockedRetailers"===e.name&&n({blockedRetailers:JSON.parse(localStorage.getItem("blockedRetailers"))}),"setToken"===e.name&&(h(e.data),c("resetApp",{token:e.data.token,user_id:e.data.user_id,user_token:e.data.user_token,receivedToken:!0})),"removeToken"===e.name&&v(),"trackEvent"===e.name&&g(e.data),"getRule"===e.name){var G=e.data,Y=G.host,Q=void 0===Y?"":Y,$=G.href,Z=void 0===$?"":$,ee={eliminate_jquery_for_scraping:!1,id:null};return/shoptagr.(com|local)/.test(Z)?(n(ee),null):(Ae[Q]=Ae[Q]||z({host:Q,href:Z}),Ae[Q].then(function(e){o(Q),n(e||ee)}).catch(function(e){o(Q),console.error(e),n(ee)}),!0)}}function _(e,t,n){var r=e.name.split(/_([^_]*)(_(.*))?/),o=(0,P.default)(r,3),i=(o[0],o[1]),a=o[2];if("init"===i){if(!localStorage.getItem("token"))return console.error("User is unauthorized!"),null;var s="string"!=typeof a?a.join("_"):a,u=s.match(/ShoptagrRuleId=(\d*)ShoptagrTagUrl=(.*)/),c=Number(u[1]),l=u[2];z({ruleId:c}).then(function(e){if(!e)throw new Error("Extension did not find this store.");localStorage.removeItem("demo_url"),localStorage.setItem("demo_tag_url",l),localStorage.setItem("demo_regex",e.url_regex),y({url:l,currentTab:!0},t)}).catch(console.error)}if("finish"===i&&(localStorage.removeItem("demo_regex"),localStorage.removeItem("demo_url"),localStorage.removeItem("demo_tag_url")),"check"===i){if(localStorage.getItem("demo_regex")){var f=localStorage.getItem("demo_regex"),d=e.data.url,h=localStorage.getItem("demo_url");if(h===d)return n(!0),null;if(!h&&e.data.url.search(f)!==-1)return localStorage.setItem("demo_url",d),n(!0),null}n(!1)}}function S(){se.stBrowser.runtime.onMessage.addListener(function(e,t,n){if(e.name&&"string"==typeof e.name)return e.name.startsWith("bg_")?(e.name=e.name.replace("bg_",""),chrome.tabs.sendMessage(t.tab.id,e)):w(e,t,n),!0})}function x(){var e={headers:{"X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}};(0,te.default)({eventName:"extension_installed"}),re.default.post(le.API_URL+"/extensions/install",{browser:ye},e).then(function(e){localStorage.setItem("isFirstLogin","true"),localStorage.setItem("xuid",e.data.xuid),localStorage.setItem("installed","true"),localStorage.setItem("associateUserWithXuid","true"),se.stBrowser.tabs.create({url:le.WEBSITE_PATH+"/demo/signup?xuid="+e.data.xuid}),g({event:"Installed Extension",xuid:e.data.xuid})}).catch(console.error)}function k(){se.stBrowser.runtime.onInstalled.addListener(function(e){"install"===e.reason&&x()})}function A(){localStorage.removeItem("rules"),localStorage.removeItem("referralLinks"),localStorage.removeItem("userIP"),localStorage.removeItem("lastUpdateUserIP")}function I(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ssl.google-analytics.com/ga.js",document.head?document.head.appendChild(e):document.addEventListener("DOMContentLoaded",function(){document.head.appendChild(e)}),window._gaq=window._gaq||[],window._gaq.push(["_setAccount","UA-43311057-5"]),window._gaq.push(["_trackPageview"])}function T(){se.stBrowser.runtime.setUninstallURL(le.WEBSITE_PATH+"/extension-deleted")}function E(){se.stBrowser.browserAction.onClicked.addListener(function(){i(),(0,se.browserSendMessageToActiveTab)("ShoptagrToolbarButtonClick",{})})}Object.defineProperty(t,"__esModule",{value:!0}),t.Cable=t.Badge=t.upgradeAxios=void 0;var O=n(725),P=r(O),L=n(726),C=r(L),R=n(41),j=r(R),D=n(21),M=r(D),B=n(70),N=r(B),U=n(169),F=r(U),q=n(10),K=r(q),J=n(78),W=r(J),H=n(168),V=r(H),X=function(){var e=(0,F.default)(N.default.mark(function e(t){var n,r=t.host,o=t.ruleId;return N.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ve.rulesDB.full){e.next=2;break}return e.abrupt("return",null);case 2:if(!o){e.next=8;break}return e.next=5,ve.rulesDB.full.where("id").equals(o).toArray();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,ve.rulesDB.full.where("domain").equalsIgnoreCase(r).toArray();case 10:e.t0=e.sent;case 11:return n=e.t0,e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,F.default)(N.default.mark(function e(t){var n,r,o=t.host,i=t.href,a=t.ruleId;return N.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,ve.rulesDB.supported.where("id").equals(a).toArray();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,ve.rulesDB.supported.where("domain").equalsIgnoreCase(o).toArray();case 8:e.t0=e.sent;case 9:if(n=e.t0,n&&n.length){e.next=12;break}return e.abrupt("return",null);case 12:if(1!==n.length&&!a){e.next=14;break}return e.abrupt("return",n[0]);case 14:return r=n.filter(function(e){var t=e.url_regex;return t&&new RegExp(t).test(i)}).sort(function(e,t){return t.url_regex.length-e.url_regex.length}),e.abrupt("return",r[0]||null);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,F.default)(N.default.mark(function e(t){var n,r,o,i,a,s,u,c,l,f,d,h=t.host,p=t.href,v=t.ruleId;return N.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X({host:h,href:p,ruleId:v});case 2:if(n=e.sent,!n){e.next=5;break}return e.abrupt("return",n[0]);case 5:return e.next=7,G({host:h,href:p,ruleId:v});case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:if(o=void 0,i=b().filter(function(e){var t=e.id;return t===r.id})[0],a={headers:{"Cache-Control":"no-cache, no-store, must-revalidate","X-Platform":oe.PLATFORMS.extension,"X-Platform-Version":"1.9.9.25"}},!i){e.next=24;break}if(!(i.lastReceived&&i.lastReceived+we>(new Date).getTime())){e.next=16;break}return e.abrupt("return",i);case 16:return e.next=18,re.default.get(le.RULES_URL+"/"+i.id+"/?updated_at="+(i.updated_at||""),a);case 18:return s=e.sent,u=s.data,c=b().filter(function(e){var t=e.id;return t!==i.id}),o=!u.up_to_date&&u.id?u:i,localStorage.setItem("rules",(0,V.default)([].concat((0,M.default)(c),[(0,K.default)({},o,{lastReceived:(new Date).getTime()})]))),e.abrupt("return",o);case 24:return l=p?le.RULES_URL+"/?url="+encodeURIComponent(p)+"&present=full":le.RULES_URL+"/"+v+"/",e.next=27,re.default.get(l,a);case 27:return f=e.sent,d=f.data,o=d instanceof window.Array?d[0]:d,o&&o instanceof window.Object&&(o=(0,K.default)({},o,{lastReceived:(new Date).getTime()}),localStorage.setItem("rules",(0,V.default)([].concat((0,M.default)(b()),[o])))),e.abrupt("return",o);case 32:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.fetchCJDomains=a,t.fetchFeatures=s,t.fetchBlockedRetailers=u,t.sendGlobalMessage=c,t.fetchUserData=l,t.respondToMessage=w,t.processDemoRequest=_,t.addMessageListener=S,t.installedListener=x,t.addInstalledListener=k,t.clearLocalStorage=A,t.initGoogleAnalytics=I,t.addUninstallListener=T,t.addToolbarButtonClickListener=E;var Y=n(718),Q=r(Y),$=n(719),Z=r($),ee=n(367),te=r(ee),ne=n(572),re=r(ne),oe=n(17),ie=n(571),ae=r(ie),se=n(9),ue=n(181),ce=r(ue),le=n(16),fe=n(594),de=r(fe),he=n(592),pe=r(he),ve=n(495),me=n(498),ge=n(597),ye=(0,ce.default)(),be=6e4,we=36e5,_e=864e5,Se=30*_e,xe=new de.default,ke={},Ae={},Ie=(t.upgradeAxios=function(){(0,oe.setPlatformHeader)(oe.PLATFORMS.extension,"1.9.9.25"),(0,oe.setAuthorizationToken)(function(){return localStorage.getItem("token")})},t.Badge=new pe.default({messageObserver:xe,url:le.API_URL+"/notifications?type=app&page=1",handler:function(e){var t=e.data.notifications_not_read>0?e.data.notifications_not_read.toString():"";se.stBrowser.browserAction.setBadgeText({text:t}),se.stBrowser.browserAction.setBadgeBackgroundColor({color:"#6b56eb"})}})),Te=t.Cable={cable:null,initCable:function(e){var t=e.userId,n=e.token,r=(0,Q.default)(t,n);this.cable=ae.default.createConsumer(r),console.log("Connection to ActionCable",r)},disconnect:function(){this.cable&&(this.cable.disconnect(),this.cable=null,console.log("Disconnection of ActionCable"))},connect:function(){if(localStorage.getItem("token")){var e=localStorage.getItem("user_id"),t=localStorage.getItem("token");this.disconnect(),this.initCable({userId:e,token:t}),this.cable.subscriptions.create({channel:"NotificationsChannel",id:e},{connected:function(){return console.log("ActionCable for notifications connected")},disconnected:function(){return console.log("ActionCable for notifications disconnected")},received:function(e){console.log("Notification sent",e),(0,se.browserSendMessageToActiveTab)("receiveGeneralNotification",e)}}),this.cable.subscriptions.create({channel:"BackendMessagesChannel",id:e},{connected:function(){return console.log("ActionCable for backendMessages connected")},disconnected:function(){return console.log("ActionCable for backendMessages disconnected")},received:function(e){console.log("BackendMessages sent",e),"reset_features"===e.action&&s()}}),this.cable.subscriptions.create({channel:"UserProfileChannel"},{connected:function(){return console.log("ActionCable for userProfile connected")},disconnected:function(){return console.log("ActionCable for userProfile disconnected")},received:function(e){var t=e.user;t&&[!0,!1].includes(t.cashback_available)&&t.cashback_available!==JSON.parse(localStorage.getItem("cashbackAvailable"))&&(localStorage.setItem("cashbackAvailable",(0,V.default)(t.cashback_available)),c("setUserData",{cashbackAvailable:t.cashback_available}))}})}}}},596:function(e,t,n){"use strict";function r(e,t){var n={code:"\n      var injected = window.shoptagrCheckInject;\n      window.shoptagrCheckInject = true;\n      injected;\n    ",runAt:"document_start"};i.stBrowser.tabs.executeScript(e,n,t)}function o(e){var t=e.name,n=e.tabId,r=e.cb;i.stBrowser.tabs.executeScript(n,{file:"/"+t,runAt:"document_end"},r)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);t.default=function(){i.stBrowser.tabs.onUpdated.addListener(function(e,t,n){return!t.status||"about:blank"===n.url||/(\.pdf)$/gi.test(n.url)?null:void r(e,function(t){i.stBrowser.runtime.lastError||t&&t[0]||(o({name:"js/inject.bundle.js",tabId:e,cb:function(){return console.log("load inject bundle success!")}}),o({name:"js/shoptagrJQ.bundle.js",tabId:e,cb:function(){return console.log("load shoptagrJQ bundle success!")}}))})})},e.exports=t.default},597:function(e,t){"use strict";function n(e){var t=e.name,n=e.timeout,r=localStorage.getItem(t),o=r?Number(r)+n:void 0;return!o||o<=(new Date).getTime()}function r(e){var t=e.name;localStorage.setItem(t,String((new Date).getTime()))}function o(e){var t=e.name,o=e.timeout,i=n({name:t,timeout:o});return i&&r({name:t}),i}function i(e){var t=e.name,n=localStorage.getItem(t),r=n?Number(n):void 0;return!r||r<=(new Date).getTime()}function a(e){var t=e.name,n=e.timeout;localStorage.setItem(t,String((new Date).getTime()+n))}function s(e){var t=e.name,n=e.timeout,r=i({name:t});return r&&a({name:t,timeout:n}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.checkItemDisplay=n,t.setItemDisplay=r,t.checkAndSetItemDisplay=o,t.checkNextItemDisplay=i,t.setNextItemDisplay=a,t.checkAndSetNextItemDisplay=s},715:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var i=n(595),a=o(i),s=n(596),u=r(s),c=n(495),l=n(498),f=864e5,d=36e5;a.clearLocalStorage(),a.upgradeAxios(),(0,u.default)(),(0,c.initShortRulesDatabase)(),setInterval(c.initShortRulesDatabase,d),a.fetchUserData(),a.fetchCJDomains(),a.fetchBlockedRetailers(),a.fetchFeatures(),a.Badge.fetch(),setInterval(function(){a.fetchCJDomains(),a.fetchBlockedRetailers(),a.fetchFeatures(),a.Badge.fetch()},f),(0,l.initCJListener)(),a.addToolbarButtonClickListener(),a.Cable.connect(),a.addMessageListener(),a.addInstalledListener(),a.addUninstallListener(),a.initGoogleAnalytics()},718:function(e,t,n){"use strict";function r(e,t){return"wss://api-beta.shoptagr.com/cable?token="+t+"&id="+e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},719:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={screen_resolution:screen.width+"x"+screen.height,source:e};return a.default.post("https://api-beta.shoptagr.com/track/sessions/track",t,{timeout:s}).catch(function(e){return console.error("Session was not started \n",e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(17),a=r(i),s=3e3;e.exports=t.default},721:function(e,t){"use strict";var n=[8,215,6,79,1,558,228,487,194,782,4,9,359,87,119,138,168,91,5,469,133,399,2,34,205,241,794,88,188,253,103,392,787,315,380,1865,77,186,269,252,258,250,512,35,857,174,762,76,171,382,209,115,536,176,396,64,16,249,179,136,230,214,686,66,213,370,279,405,30,681,211,697,1147,262,348,779,248,360,267,148,291,813,639,785,120,274,411,80,85,116,25,953,769,237,38,7,329,815,233,114,491,618,365,181,163,124,327,903,410,559,822,355,108,185,84,506,520,698,18,256,335,127,391,69,3576,433,112,1626,23,795,187,101,180,142,3759,634,70,508,219,766,137,745,1279,1195,1949,1727,26,311,1397,563,165,1248,86,297,113,424,200,3639,685,408,153,1677,285,212,3559,437,507,381,557,189,2034,937,741,3578,699,386,95,709,135,52,1236,251,366,232,68,471,985,317,282,385,117,780,268,680,96,166,1417,486,208,1241,684,368,247,1808,240,222,418,497,94,141,4080,615,243,1662,1900,42,55,3541,1663,645,783,823,449,958,969,951,422,642,3586,4195,361,129,784,33,1265,744,954,354,1839,877,950,1648,420,345,32,2947,105,1234,1324,4097,1299,3666,2294,261,5042,389,333,413,660,1824,305,123,959,1723,949,387,480,406,1931,1735,641,300,2048,3630,1284,4228,1666,473,1743,1710,75,147,1675,879,426,3571,398,821,1420,4227,1605,560,1309,1692,483,346,935,72,1691,995,448,1928,688,909,1293,619,2042,1664,3627,318,1670,434,1297,819,1702,49,3579,62,1177,56,272,234,4016,656,705,1680,674,419,44,3600,275,778,1679,130,1235,225,170,144,1218,1424,1981,1423,553,493,1023,481,132,356,109,3567,430,517,1298,3570,1722,875,1786,46,1129,192,534,1250,3599,498,1674,692,1255,183,39,524,2504,1705,1310,666,4711,1242,1301,519,245,749,1916,695,1245,41,1155,43,3978,522,759,290,5291,859,963,826,3573,3572,894,4019,24,3577,37,2786,257,3557,3583,12,280,1434,862,54,2851,1286,1036,1251,1790,3267,3563,712,17,1801,1933,1850,1714,1678,1183,1857,1208,576,635,1243,1890,1911,1303,1731,1766,2067,296,175,1435,4096,2056,347,764,332,781,4009,158,3408,2652,3287,236,316,206,915,3923,402,1806,466,4132,1667,500,527,3602,3756,1746,3958,2135,1288,1732,653,711,3561,858,1711,1431,1045,531,3430,435,1777,1964,689,51,462,1266,111,640,442,1273,1875,1737,227,694,350,3604,330,1294,811,3758,564,946,651,373,265,537,4621,1849,1724,3608,306,441,3629,568,541,173,1415,3337,1938,1757,554,1932,1244,612,465,2108,476,1847,3548,530,1820,292,2433,450,3582,1842,1669,876,351,1237,791,61,4098,417,952,1728,3591,429,2671,1257,1621,1815,1509,242,2955,743,1432,164,4092,1739,1256,637,1253,3435,2075,1028,900,1295,986,3575,1741,374,2036,1708,4174,4145,654,423,1765,3595,1769,1697,1748,1232,2973,1462,4122,1191,1510,494,110,11898,1425,3661,286,3215,616,691,3158,1804,1672,1247,1862,36,254,1776,747,1729,177,4103,1974,367,3593,344,1858,552,1843,1852,3560,3757,1840,1976,865,1044,1445,1287,662,1163,1283,1880,1285,484,1745,195,1491,1706,971,320,1111,3859,169,3564,1463,737,1034,768,1071,3550,1935,3683,231,1789,207,447,1274,1720,454,239,2298,965,1712,3313,3601,118,324,1774,2735,1130,4338,1328,1713,1912,4545,4173,409,2567,504,1903,3587,3580,478,4203,13,928,932,1700,1798,463,60,3673,617,1694,1206,436,1238,1785,833,1848,5487,201,1895,4778,2847,3731,3584,1918,4090,2665,1730,2537,1512,1475,1846,301,1687,259,4765,3741,562,1752,1893,1464,3588,93,1718,395,1891,622,1749,1817,4253,1668,1211,151,1227,561,765,2896,4202,646,1681,155,1775,461,1802,2405,852,3664,1772,814,1919,4008,1291,1312,1690,3603,544,131,3568,636,1426,4559,756,1682,1898,1929,1754,535,310,3671,1570,3365,472,1829,1282,4088,1751,4420,2122,3459,1688,1833,1326,357,4315,2098,375,98,3552,1269,4793,3609,3031,3672,2542,816,1289,2648,2124,3893,5333,2831,2279,1908,968,1709,1887,3669,63,1278,1906,2903,976,4024,4107,4014,755,555,1686,4248,431,1725,298,1818,4862,664,1845,1128,931,2509,671,3674,2989,1889,638,3605,3623,412,440,1782,470,2333,4378,314,1984,467,1465,5399,1816,701,4204,3720,3667,869,4802,874,425,682,337,191,1834,4398,438,1683,3925,1300,2680,1027,3555,3239,99,1946,1716,955,1008,620,1665,3652,3581,757,443,1272,299,458,730,3737,4530,3345,1986,1968,1811,4305,384,1881,1333,1870,3556,1814,502,2519,571,334,4206,1882,849,5745,3462,3562,3243,3694,1395,2412,3204,2102,4012,464,416,3612,100,89,970,341,1967,1939,102,3681,521,2656,4821,1042,4198,1428,999,1961,2267,1052,1422,2088,668,1859,1701,4616,1433,4416,5454,377,273,407,5012,15,905,340,4298,4196,4114,4268,1734,4113,3878,997,1855,2491,1956,661,1258,2e3,343,4321,2815,4646,824,1940,328,4231,451,1201,255,1249,4694,266,5455,1466,1594,1948,1837,4647,4663,2419,2121,4070,3649,2935,1957,4077,1143,1788,1457,3274,4343,4415,3418,4197,2012,3933,2762,1024,1480,4439,774,2097,3722,238,1787,4067,477,625,11588,1693,4332,4015,2704,1413,1733,4503,4453,3659,2674,1499,4312,2540,1794,4144,3913,861,1481,5154,693,2608,3466,1416,1951,4803,880,1886,162,3807,3753,5398,993,614,1046,3822,3676,1750,5178,193,2060,1231,4341,3569,4520,980,3935,3166,4188,2807,4215,4124,3426,1851,964,3670,1767,1469,1182,978,2005,1822,4758,1878,1823,715,3596,319,4295,4210,623,159,4553,388,459,2923,1254,4928,1427,1472,372,1756,1947,3742,3526,1781,2047,1828,4277,630,1844,4959,4233,945,4071,983,3677,376,4266,2871,4342,4347,4224,4404,2754,4205,3549,2053,4199,556,1059,4687,1698,126,626,1689,690,2105,1830,3594,4365,2747,1049,1277,403,1306,2071,1960,1696,4435,5332,1060,4547,3724,3354,3721,1203,4436,1717,1002,4850,3192,4401,1102,1792,4805,1181,3117,2712,2559,4102,353,3617,734,364,3536,746,1937,3615,4767,2051,1646,1758,4707,4423,5423,1082,760,2743,2783,3650,2083,338,1684,1944,4292,1017,446,3736,4255,4544,3665,628,873,4223,4390,4316,1950,2119,4212,2739,3177,4810,2639,3148,4772,3551,1999,2794,1093,2243,1927,1803,3589,4280,4245,152,496,1924,1905,4535,3613,1809,1901,4516,940,3592,1863,4507,2487,1699,3684,3680,4313,4519,4221,4314,4727,4689,1671,4211,4216,4833,4402,1488,11594,3730,4287,1910,1437,1917,4543,2867,3654,1913,1892,1632,4076,4424,2117,4358,4739,2050,2978,1405,832,3829,3646,2004,4671,1703,3397,3512,4329,3381,4238,3936,2084,771,3926,3362,59,3247,3126,3229,5073,786,613,5404,1885,844,4455,667,1064,4759,1877,1954,860,575,4627,2572,3876,4352,5637,4774,4699,2493,3046,2731,1113,4217,40,549,3026,1936,4021,572,2118,5046,2571,4380,4441,1873,5122,4011,5117,3041,1826,988,3393,97,393,3341,1199,1962,3675,5047,1874,3377,979,2032,2907,4521,2589,4372,4340,4697,4411,789,4353,1292,4541,4531,2500,4723,4264,1821,4356,2965,1148,5253,1982,2486,4719,1331,4732,244,4895,3558,3682,2040,3631,1742,4010,2882,2086,3662,2494,1812,11857,2533,4963,2919,4826,4939,2495,1673,4748,307,1861,4179,2577,3358,4274,1302,2677,5418,3007,4252,204,4819,1229,2961,1487,4386,4857,883,5278,960,773,4620,4539,11063,2151,2603,3411,3103,4361,1853,1921,4323,1784,5578,4226,3762,4527,9031,4713,4036,1707,1747,3917,754,3964,313,742,934,3632,216,4852,4237,4552,1650,1051,4047,5739,4324,4865,1764,4285,4446,3219,4232,4271,1721,4464,3939,157,2157,4214,938,4735,5427,3812,4528,414,2099,1070,196,3470,4265,5521,4405,2018,3107,4861,4911,1760,798,4299,1868,4409,4408,1783,4936,4033,2778,545,2485,2033,2275,2835,3999,989,4302,92,2708,5164,4875,1296,621,740,2823,404,4288,5474,4089,4768,736,3501,4855,1768,3620,5584,1444,2576,4556,5411,221,1429,4783,4349,1192,1963,4704,3173,2031,2694,1187,4056,4554,4750,4625,4538,579,3279,369,843,4549,139,453,4422,3886,1308,902,281,5486,3678,1952,845,1062,4381,1325,3640,3329,4751,3668,3912,1327,981,2116,1978,3633,1780,4651,2631,810,700,2472,4754,3373,4993,1569,703,4317,3915,2038,5308,3718,150,665,1010,5025,1819,2995,4307,1836,4910,9158,887,11659,1409,2855,4419,3982,4392,3207,11,1907,696,3252,4363,4336,4241,4389,1323,2003,4987,4330,2613,4291,3020,864,178,4448,4917,4426,4648,339,400,2052,455,4511,1658,293,22,3015,2552,4771,1485,5560,4951,1159,3821,226,4540,1172,4451,4853,4698,3651,4397,401,4533,4334,1838,3003,3162,4669,3860,4335,11066,1514,4207,4018,532,2900,4746,551,3871,3086,4677,1813,4428,485,2716,895,4860,1943,1228,4359,4566,4296,3402,1311,1322,2239,1207,825,1923,1138,4247,1131,3806,4846,4629,3896,4656,1771,2617,5780,1142,2030,3914,154,4050,4818,4501,1719,1973,5869,4913,1685,5162,4278,5495,4112,2627,4753,624,4536,3707,4532,3983,3223,5205,514,5604,4764,817,707,11075,1879,731,3868,5572,4730,2885,4276,1020,1770,2313,2362,4896,1011,4563,4120,4158,1137,4006,4949,1925,2643,121,3655,4256,4988,1057,3763,3349,4222,4640,349,1436,1841,501,4300,4718,4673,4311,1041,4200,855,4306,4691,5207,4700,3098,4427,4017,4417,3449,3809,1860,3011,2827,1055,4812,5190,11768,452,2081,5606,4164,4617,4683,323,4877,1642,908,4494,4106,325,2037,3739,4457,1920,1980,910,4702,4452,1897,1972,4151,1904,892,5414,2058,3259,2751,1773,1825,4509,489,4935,4650,1634,161,2078,5620,5187,1356,2915,1240,4449,4940,5396,3725,5438,4333,1165,4807,1896,4209,1635,4318,4440,3814,5513,1994,4623,2260,4867,4932,2700,5406,5405,4272,2790,4668,5490,1631,2968,643,4736,5457,990,4709,5077,533,5403,890,4433,4886,1175,4773,4465,4743,4537,2388,4394,4868,1639,5417,4717,4782,1598,8252,739,1753,4918,4966,939,3153,2543,4438,5534,4219,1037,67,1276,2774,4815,2029,1185,5817,2085,14,4693,5011,5040,866,4331,4550,1029,3761,2684,4937,1120,358,942,3747,217,5419,2490,4396,896,1083,5431,2492,5443,4425,1502,4407,47,1329,3622,1224,4728,4303,4796,548,184,2391,457,4830,2104,543,4755,4254,2593,546,4814,3808,3950,994,1039,432,4798,3590,4459,2435,5771,1704,2162,5696,5038,2089,3984,732,5508,58,4412,4410,421,1448,5488,4733,4679,3980,11934,295,2720,2045,4761,5076,2080,4757,3439,2496,4876,3804,5037,921,4790,4421,1800,4447,294,5505,3813,5551,4703,4705,5177,4504,1755,977,3873,5665,4824,4916,4444,4454,4500,4218,4827,4066,5400,1314,5083,4450,5093,3839,4806,11593,5080,2551,107,1061,190,5540,5519,4350,4762,397,4848,3321,1548,4976,1366,11977,4496,3075,2028,4406,4804,542,5636,1443,4060,145,5243,1796,4738,1281,3941,4599,4678,627,4872,4662,629,11059,4731,3991,4430,7092,3907,4242,761,4653,2728,203,930,11677,4326,3875,4479,1190,5169,2434,321,5441,827,4724,4763,2072,4157,4239,1616,4346,4726,3858,2758,5003,4598,3890,2216,4912,4502,4834,2020,2061,670,4508,4873,5407,3626,2766,4309,4534,1553,4385,2076,657,4476,4505,1396,1761,7095,2437,4781,1587,4696,5221,4716,1958,5357,538,2140,218,725,3811,4339,220,5168,4652,3889,706,4413,3135,488,5171,4816,5420,5709,539,3711,3733,4915,4643,4189,11856,5030,3701,1140,1048,4870,4970,4859,4899,911,4437,2423,4946,4369,5493,2264,10,4672,5387,2001,2661,2041,11642,4725,2688,5435,3333,2015,2697,5261,2148,4836,5095,1215,4529,5125,3454,1915,4510,1189,4954,4838,4263,1942,1414,3385,1884,4053,5348,4808,1271,4560,4989,5548,550,3948,5598,3851,4889,1479,3476,4961,5309,1050,5633,3836,5016,2524,224,4512,4799,4636,5039,3911,1226,540,1975,4811,1467,182,2120,4548,4892,5167,1832,3658,4506,4990,3481,4909,4756,5617,5239,2958,2377,5501,1171,4660,3065,4984,4575,4742,4546,3189,5098,4642,4320,5314,5343,1112,733,4379,5251,906,2801,4982,1220,3922,5209,4712,2769,4884,3852,4551,4658,379,5763,1831,5481,2804,4283,5211,3496,4794,1021,1577,1016,143,5049,4229,4619,4986,2178,991,5504,649,1267,4632,5703,4847,4720,2306,4766,650,4985,4140,2529,5287,4950,4442,1494,4515,4740,4715,1152,4682,1655,5240,5808,3679,2668,11849,4322,4659,5041,4885,3997,4832,5533,4649,5021,4645,4837,4685,5097,6609,3738,1132,4843,3170,4903,663,271,3909,5334,1654,4831,5842,5135,3740,5492,5163,5397,5628,4722,5491,4999,4980,4403,4879,5496,5835,5424,5201,2987,5007,4360,4388,5562,3847,891,3894,475,4930,3702,3831,3755,3848,2819,4921,11625,5181,5448,4888,5355,5480,1330,5594,5203,2166,5661,10030,5296,2475,283,5216,5607,1618,322,5300,4432,4456,1449,5803,672,4443,2931,3653,4749,3938,4841,577,3263,4290,10508,5138,1902,4898,1169,4977,2100,2875,4670,4856,2013,5214,4887,1117,3769,4681,2999,2541,3867,2975,1110,5847,1109,2449,3445,4787,2484,5335,1108,4952,3283,4638,5867,3987,474,5353,5089,5475,5156,4905,4695,3299,4784,4565,11057,796,4779,3641,3888,5127,4667,5250,4956,3618,5307,5409,3810,197,4842,5204,1198,5761,4809,659,4244,5385,2371,2811,3830,3647,3977,5052,3616,4897,984,5050,3705,3636,5185,4030,5004,11578,4844,3522,4924,5235,528,4882,4881,4745,2862,5218,10028,2107,2064,5484,1158,5252,5079,1624,3642,5033,897,5091,2066,5532,11579,5001,11580,1119,11058,4354,5557,4655,5010,4760,7644,4686,3735,10381,2927,788,1609,5536,5506,468,2455,1471,4150,4869,3305,4734,5299,11708,5579,2510,11611,5015,4890,10026,2454,4864,4387,4871,4513,648,3270,4955,5529,3648,1157,5470,4914,4259,4499,4355,5585,5339,5346,4968,3112,4680,2395,818,456,924,3233,4267,2247,3414,5272,679,4938,4769,5790,3692,492,5510,710,2514,7682,4967,1659,1161,5432,5564,3834,4741,2302,4284,3853,4037,4823,4942,5294,5814,1603,4048,3508,482,4981,10092,4609,5384,5084,1134,5223,11060,5402,5191,2983,5202,5440,11826,5206,2271,4328,5249,4996,4894,4933,4431,5378,526,5020,11713,5056,1864,881,5182,5568,5453,1869,5099,4969,11835,5142,4926,5811,11724,5704,3553,4460,3985,5244,5868,4840,5786,5147,4721,574,1799,10044,5574,4310,10651,1610,1601,1493,4863,3505,2465,5710,2623,1876,5545,820,3855,4304,3805,4883,5773,5634,5831,2943,9090,1715,1222,957,5166,5329,5e3,6613,5798,4919,4822,5477,5719,4780,11895,5439,4327,3955,7091,5158,9536,4143,11769,5518,1945,5856,50,5170,5857,5815,3663,5306,5085,5841,479,4035,5615,511,4641,966,5288,3542,460,331,4615,5870,5222,1807,9190,4922,5258,7743,4874,2866,9426,5267,4770,3841,4243,1602,5809,4825,4684,1835,5734,1460,4393,809,5570,1622,4947,1121,5350,4828,1196,831,5444,5390,5611,1856,5717,1738,4634,5055,3976,5229,10890,1084,6612,3708,11968,5347,5149,11617,5322,5610,4851,1645,1030,3690,5013,5775,4817,4230,5436,4964,4957,3953,1053,9309,5227,5641,4953,4618,3992,3574,4994,5555,8288,2087,11074,1223,4351,3818,2556,3906,4708,5215,4418,4820,4929,3882,11686,790,11879,5462,5866,5341,3554,5176,4829,5707,5494,11608,5812,5559,3139,270,4786,1430,7770,2635,4297,967,5588,5829,390,5622,3989,854,1038,570,5375,3946,5711,5150,5152,5503,4665,5344,1478,5017,5340,11882,4348,4813,5592,973,3949,5850,8878,5074,899,4710,5349,1268,5821,1399,767,5237,5449,5379,5556,5461,3826,4714,3823,11576,3880,5816,3614,4073,7787,3489,5802,5328,1740,11845,1583,4900,5248,4801,5219,4958,5241,992,1003,3317,5625,11008,1600,4948,5148,1805,3861,6610,5268,4040,8626,5032,1354,2074,5609,5297,4279,8189,1166,3828,4752,2892,3921,3934,5264,5319,658,5479,5027,4588,4337,3932,3196,11687,3898,5081,828,4908,5126,1178,5312,4375,5220,8872,2436,4020,2079,2381,3309,5263,4849,5165,5155,11583,5326,3422,5123,4923,9356,3891,5524,5627,5360,5313,5472,1122,5008,4991,1358,11065,4213,4399,1926,5325,2326,4997,4275,11731,5459,5002,4692,5705,9953,5014,5295,5193,1135,3765,4789,5511,4983,11609,871,1474,3743];
e.exports=n},722:function(e,t,n){e.exports={default:n(728),__esModule:!0}},723:function(e,t,n){e.exports={default:n(729),__esModule:!0}},725:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(723),i=r(o),a=n(722),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},726:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(99),i=r(o);t.default=function(e){return Array.isArray(e)?e:(0,i.default)(e)}},728:function(e,t,n){n(92),n(61),e.exports=n(731)},729:function(e,t,n){n(92),n(61),e.exports=n(732)},731:function(e,t,n){var r=n(22),o=n(72);e.exports=n(11).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},732:function(e,t,n){var r=n(71),o=n(14)("iterator"),i=n(32);e.exports=n(11).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(r(t))}},738:function(e,t,n){(function(t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){return"object"!=typeof t?e:(Ce(t).forEach(function(n){e[n]=t[n]}),e)}function r(e,t){return Me.call(e,t)}function o(e,t){"function"==typeof t&&(t=t(De(e))),Ce(t).forEach(function(n){i(e,n,t[n])})}function i(t,n,o,i){Be(t,n,e(o&&r(o,"get")&&"function"==typeof o.get?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},i))}function a(e){return{from:function(t){return e.prototype=Object.create(t.prototype),i(e.prototype,"constructor",e),{extend:o.bind(null,e.prototype)}}}}function s(e,t){var n,r=Ne(e,t);return r||(n=De(e))&&s(n,t)}function u(e,t,n){return Ue.call(e,t,n)}function c(e,t){return t(e)}function l(e){if(!e)throw new Error("Assertion Failed")}function f(e){je.setImmediate?n(e):setTimeout(e,0)}function d(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function h(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function p(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function v(e,t){if(r(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],o=0,i=t.length;o<i;++o){var a=v(e,t[o]);n.push(a)}return n}var s=t.indexOf(".");if(s!==-1){var u=e[t.substr(0,s)];return void 0===u?void 0:v(u,t.substr(s+1))}}function m(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){l("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)m(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var a=t.substr(0,i),s=t.substr(i+1);if(""===s)void 0===n?delete e[a]:e[a]=n;else{var u=e[a];u||(u=e[a]={}),m(u,s,n)}}else void 0===n?delete e[t]:e[t]=n}}function g(e,t){"string"==typeof t?m(e,t,void 0):"length"in t&&[].map.call(t,function(t){m(e,t,void 0)})}function y(e){var t={};for(var n in e)r(e,n)&&(t[n]=e[n]);return t}function b(e){return Fe.apply([],e)}function w(e){if(!e||"object"!=typeof e)return e;var t;if(Re(e)){t=[];for(var n=0,o=e.length;n<o;++n)t.push(w(e[n]))}else if(qe.indexOf(e.constructor)>=0)t=e;else{t=e.constructor?Object.create(e.constructor.prototype):{};for(var i in e)r(e,i)&&(t[i]=w(e[i]))}return t}function _(e,t,n,o){return n=n||{},o=o||"",Ce(e).forEach(function(i){if(r(t,i)){var a=e[i],s=t[i];"object"==typeof a&&"object"==typeof s&&a&&s&&""+a.constructor==""+s.constructor?_(a,s,n,o+i+"."):a!==s&&(n[o+i]=t[i])}else n[o+i]=void 0}),Ce(t).forEach(function(i){r(e,i)||(n[o+i]=t[i])}),n}function S(e){var t,n,r,o;if(1===arguments.length){if(Re(e))return e.slice();if(this===We&&"string"==typeof e)return[e];if(o=Je(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(null==e)return[e];if(t=e.length,"number"==typeof t){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}function x(e,t){He=e,Ve=t}function k(){if(Xe)try{throw k.arguments,new Error}catch(e){return e}return new Error}function A(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Ve).map(function(e){return"\n"+e}).join("")):""}function I(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+A(k(),1)),t.apply(this,arguments)}}function T(e,t){this._e=k(),this.name=e,this.message=t}function E(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function O(e,t,n,r){this._e=k(),this.failures=t,this.failedKeys=r,this.successCount=n}function P(e,t){this._e=k(),this.name="BulkError",this.failures=t,this.message=E(e,t)}function L(e,t){if(!e||e instanceof T||e instanceof TypeError||e instanceof SyntaxError||!e.name||!tt[e.name])return e;var n=new tt[e.name](t||e.message,e);return"stack"in e&&i(n,"stack",{get:function(){return this.inner.stack}}),n}function C(){}function R(e){return e}function j(e,t){return null==e||e===R?t:function(n){return t(e(n))}}function D(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function M(e,t){return e===C?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?D(r,this.onsuccess):r),o&&(this.onerror=this.onerror?D(o,this.onerror):o),void 0!==i?i:n}}function B(e,t){return e===C?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?D(n,this.onsuccess):n),r&&(this.onerror=this.onerror?D(r,this.onerror):r)}}function N(t,n){return t===C?n:function(r){var o=t.apply(this,arguments);e(r,o);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?D(i,this.onsuccess):i),a&&(this.onerror=this.onerror?D(a,this.onerror):a),void 0===o?void 0===s?void 0:s:e(o,s)}}function U(e,t){return e===C?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function F(e,t){return e===C?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}function q(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=C,this._lib=!1;var t=this._PSD=At;if(He&&(this._stackHolder=k(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==rt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&W(this,this._value))}this._state=null,this._value=null,++t.ref,J(this,e)}function K(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function J(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Q();t&&"function"==typeof t.then?J(e,function(e,n){t instanceof q?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,H(e)),n&&$()}},W.bind(null,e))}catch(t){W(e,t)}}function W(e,t){if(_t.push(t),null===e._state){var n=e._lib&&Q();t=xt(t),e._state=!1,e._value=t,He&&null!==t&&"object"==typeof t&&!t._promise&&p(function(){var n=s(t,"stack");t._promise=e,i(t,"stack",{get:function(){return vt?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),te(e),H(e),n&&$()}}function H(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)V(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===Tt&&(++Tt,gt(function(){0===--Tt&&Z()},[]))}function V(e,t){if(null===e._state)return void e._listeners.push(t);var n=e._state?t.onFulfilled:t.onRejected;return null===n?(e._state?t.resolve:t.reject)(e._value):(++t.psd.ref,++Tt,void gt(X,[n,e,t]))}function X(e,t,n){try{St=t;var r,o=t._value;t._state?r=e(o):(_t.length&&(_t=[]),r=e(o),_t.indexOf(o)===-1&&ne(t)),n.resolve(r)}catch(e){n.reject(e)}finally{St=null,0===--Tt&&Z(),--n.psd.ref||n.psd.finalize()}}function G(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var o,i,a=e._value;null!=a?(o=a.name||"Error",i=a.message||a,r=A(a,0)):(o=a,i=""),t.push(o+(i?": "+i:"")+r)}return He&&(r=A(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&G(e._prev,t,n)),t}function z(e,t){var n=t?t._numPrev+1:0;n<ot&&(e._prev=t,e._numPrev=n)}function Y(){Q()&&$()}function Q(){var e=yt;return yt=!1,bt=!1,e}function $(){var e,t,n;do for(;It.length>0;)for(e=It,It=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(It.length>0);yt=!0,bt=!0}function Z(){var e=wt;wt=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Et.slice(0),n=t.length;n;)t[--n]()}function ee(e){function t(){e(),Et.splice(Et.indexOf(t),1)}Et.push(t),++Tt,gt(function(){0===--Tt&&Z()},[])}function te(e){wt.some(function(t){return t._value===e._value})||wt.push(e)}function ne(e){for(var t=wt.length;t;)if(wt[--t]._value===e._value)return void wt.splice(t,1)}function re(e){return new q(rt,!1,e)}function oe(e,t){var n=At;return function(){var r=Q(),o=At;try{return fe(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{fe(o,!1),r&&$()}}}function ie(t,n,r,o){var i=At,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++Mt;var s=kt.env;a.env=pt?{Promise:q,PromiseProp:{value:q,configurable:!0,writable:!0},all:q.all,race:q.race,resolve:q.resolve,reject:q.reject,nthen:me(s.nthen,a),gthen:me(s.gthen,a)}:{},n&&e(a,n),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=he(a,t,r,o);return 0===a.ref&&a.finalize(),u}function ae(){return Lt.id||(Lt.id=++Ct),++Lt.awaits,Lt.echoes+=at,Lt.id}function se(e){!Lt.awaits||e&&e!==Lt.id||(0===--Lt.awaits&&(Lt.id=0),Lt.echoes=Lt.awaits*at)}function ue(e){return Lt.echoes&&e&&e.constructor===dt?(ae(),e.then(function(e){return se(),e},function(e){return se(),Nt(e)})):e}function ce(e){++Dt,Lt.echoes&&0!==--Lt.echoes||(Lt.echoes=Lt.id=0),Rt.push(At),fe(e,!0)}function le(){var e=Rt[Rt.length-1];Rt.pop(),fe(e,!1)}function fe(e,t){var n=At;if((t?!Lt.echoes||jt++&&e===At:!jt||--jt&&e===At)||pe(t?ce.bind(null,e):le),e!==At&&(At=e,n===kt&&(kt.env=de()),pt)){var r=kt.env.Promise,o=e.env;ct.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(je,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject)}}function de(){var e=je.Promise;return pt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(je,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:ct.then,gthen:e.prototype.then}:{}}function he(e,t,n,r,o){var i=At;try{return fe(e,!0),t(n,r,o)}finally{fe(i,!1)}}function pe(e){ft.call(ut,e)}function ve(e,t,n){return"function"!=typeof e?e:function(){var r=At;n&&ae(),fe(t,!0);try{return e.apply(this,arguments)}finally{fe(r,!1)}}}function me(e,t){return function(n,r){return e.call(this,ve(n,t,!1),ve(r,t,!1))}}function ge(t,n){var r;try{r=n.onuncatched(t)}catch(e){}if(r!==!1)try{var o,i={promise:n,reason:t};if(je.document&&document.createEvent?(o=document.createEvent("Event"),o.initEvent(Bt,!0,!0),e(o,i)):je.CustomEvent&&(o=new CustomEvent(Bt,{detail:i}),e(o,i)),o&&je.dispatchEvent&&(dispatchEvent(o),!je.PromiseRejectionEvent&&je.onunhandledrejection))try{je.onunhandledrejection(o)}catch(e){}o.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(e){}}function ye(e){function t(e,t,i){if("object"==typeof e)return n(e);t||(t=U),i||(i=C);var a={subscribers:[],fire:i,subscribe:function(e){a.subscribers.indexOf(e)===-1&&(a.subscribers.push(e),a.fire=t(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(t,i)}};return r[e]=o[e]=a,a}function n(e){Ce(e).forEach(function(n){var r=e[n];if(Re(r))t(n,e[n][0],e[n][1]);else{if("asap"!==r)throw new et.InvalidArgument("Invalid event config");var o=t(n,R,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];o.subscribers.forEach(function(e){f(function(){e.apply(null,t)})})})}})}var r={},o=function(t,n){if(n){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[t].subscribe.apply(null,i),e}if("string"==typeof t)return r[t]};o.addEventType=t;for(var i=1,a=arguments.length;i<a;++i)t(arguments[i]);return o}function be(t,n){function a(){tt.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+tt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+tt.name+"'. Closing db now to resume the delete request."),tt.close()}),tt.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+tt.name+"') was blocked"):console.warn("Upgrade '"+tt.name+"' blocked by other connection holding version "+e.oldVersion/10)})}function s(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function f(e,t,n){var r=tt._createTransaction(Ze,Je,qe);r.create(t),r._completion.catch(n);var o=r._reject.bind(r);ie(function(){At.trans=r,0===e?(Ce(qe).forEach(function(e){A(t,e,qe[e].primKey,qe[e].indexes)}),q.follow(function(){return tt.on.populate.fire(r)}).catch(o)):g(e,r,t).catch(o)})}function g(e,t,n){function r(){return o.length?q.resolve(o.shift()(t.idbtrans)).then(r):q.resolve()}var o=[],i=Ke.filter(function(t){return t._cfg.version===e})[0];if(!i)throw new et.Upgrade("Dexie specification of currently installed DB version is missing");qe=tt._dbSchema=i._cfg.dbschema;var a=!1,s=Ke.filter(function(t){return t._cfg.version>e});return s.forEach(function(e){o.push(function(){var r=qe,o=e._cfg.dbschema;pe(r,n),pe(o,n),qe=tt._dbSchema=o;var i=x(r,o);if(i.add.forEach(function(e){A(n,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new et.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){L(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),L(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return a=!0,q.follow(function(){e._cfg.contentUpgrade(t)})}),o.push(function(t){if(!a||!Xt){var n=e._cfg.dbschema;E(n,t)}})}),r().then(function(){T(qe,n)})}function x(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var a={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)a.recreate=!0,n.change.push(a);else{var s=o.idxByName,u=i.idxByName;for(var c in s)u[c]||a.del.push(c);for(c in u){var l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,i])}return n}function A(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){L(o,e)}),o}function T(e,t){Ce(e).forEach(function(n){t.db.objectStoreNames.contains(n)||A(t,n,e[n].primKey,e[n].indexes)})}function E(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}function L(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function D(e,t,n){if(Qe||At.letThrough){var r=tt._createTransaction(e,t,qe);try{r.create()}catch(e){return Nt(e)}return r._promise(e,function(e,t){return ie(function(){return At.trans=r,n(e,t,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!ze){if(!Ne)return Nt(new et.DatabaseClosed);tt.open().catch(C)}return nt.then(function(){return D(e,t,n)})}function U(e,t,n){var r=arguments.length;if(r<2)throw new et.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var i=b(o);return[e,i,n]}function K(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=Ve[e]?Ve[e].hook:ye(null,{creating:[M,C],reading:[j,R],updating:[N,C],deleting:[B,C]})}function J(e,t,n){return(n?Ae:xe)(function(n){e.push(n),t&&t()})}function W(e,t,n,r,o){return new q(function(i,a){var s=n.length,u=s-1;if(0===s)return i();if(r){var c,l=Ae(a),f=Se(null);p(function(){for(var r=0;r<s;++r){c={onsuccess:null,onerror:null};var a=n[r];o.call(c,a[0],a[1],t);var d=e.delete(a[0]);d._hookCtx=c,d.onerror=l,r===u?d.onsuccess=Se(i):d.onsuccess=f}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var d=0;d<s;++d){var h=e.delete(n[d]);h.onerror=xe(a),d===u&&(h.onsuccess=oe(function(){return i()}))}})}function H(e,t,n,r){var o=this;this.db=tt,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=ye(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new q(function(e,t){o._resolve=e,o._reject=t}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Nt(e)})}function V(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function X(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var o=e._ctx,i=o.table;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:i.hook.reading.fire}}function G(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function z(e,t){return e._cfg.version-t._cfg.version}function Y(e,t,n){t.forEach(function(t){var r=n[t];e.forEach(function(e){t in e||(e===H.prototype||e instanceof H?i(e,t,{get:function(){return this.table(t)}}):e[t]=new K(t,r))})})}function Q(e){e.forEach(function(e){for(var t in e)e[t]instanceof K&&delete e[t]})}function $(e,t,n,r,o,i){var a=i?function(e,t,r){return n(i(e),t,r)}:n,s=oe(a,o);e.onerror||(e.onerror=xe(o)),t?e.onsuccess=h(function(){var n=e.result;if(n){var i=function(){n.continue()};t(n,function(e){i=e},r,o)&&s(n.value,n,function(e){i=e}),i()}else r()},o):e.onsuccess=h(function(){var t=e.result;if(t){var n=function(){t.continue()};s(t.value,t,function(e){n=e}),n()}else r()},o)}function Z(e){var t=[];return e.split(",").forEach(function(e){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new Ee(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Re(r),/\./.test(e)))}),t}function ee(e,t){return Ue.cmp(e,t)}function te(e,t){return ee(e,t)<0?e:t}function ne(e,t){return ee(e,t)>0?e:t}function re(e,t){return Ue.cmp(e,t)}function ue(e,t){return Ue.cmp(t,e)}function ce(e,t){return e<t?-1:e===t?0:1}function le(e,t){return e>t?-1:e===t?0:1}function fe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function de(){if(tt.verno=Xe.version/10,tt._dbSchema=qe={},Je=u(Xe.objectStoreNames,0),0!==Je.length){var e=Xe.transaction(Pe(Je),"readonly");Je.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1,i=new Ee(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,o),a=[],s=0;s<n.indexNames.length;++s){var u=n.index(n.indexNames[s]);r=u.keyPath,o=r&&"string"==typeof r&&r.indexOf(".")!==-1;var c=new Ee(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,o);a.push(c)}qe[t]=new Oe(t,i,a,{})}),Y([Ve],Ce(qe),qe)}}function pe(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],i=t.objectStore(o);we="getAll"in i;for(var a=0;a<i.indexNames.length;++a){var s=i.indexNames[a],c=i.index(s).keyPath,l="string"==typeof c?c:"["+u(c).join("+")+"]";if(e[o]){var f=e[o].idxByName[l];f&&(f.name=s)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&je.WorkerGlobalScope&&je instanceof je.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(we=!1)}function ve(e){tt.on("blocked").fire(e),Ht.filter(function(e){return e.name===tt.name&&e!==tt&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}var me,ge,we,De=be.dependencies,Me=e({addons:be.addons,autoOpen:!0,indexedDB:De.indexedDB,IDBKeyRange:De.IDBKeyRange},n),Be=Me.addons,Ne=Me.autoOpen,Ue=Me.indexedDB,Fe=Me.IDBKeyRange,qe=this._dbSchema={},Ke=[],Je=[],Ve={},Xe=null,Ge=null,ze=!1,Ye=null,Qe=!1,$e="readonly",Ze="readwrite",tt=this,nt=new q(function(e){me=e}),rt=new q(function(e,t){ge=t}),ot=!0,it=!!Le(Ue);this.version=function(e){if(Xe||ze)throw new et.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=Ke.filter(function(t){return t._cfg.version===e})[0];return t?t:(t=new s(e),Ke.push(t),Ke.sort(z),ot=!1,t)},e(s.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?e(this._cfg.storesSource,t):t;var n={};Ke.forEach(function(t){e(n,t._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(n,r),qe=tt._dbSchema=r,Q([Ve,tt,H.prototype]),Y([Ve,tt,H.prototype,this._cfg.tables],Ce(r),r),Je=Ce(r),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){Ce(e).forEach(function(n){if(null!==e[n]){var r={},o=Z(e[n]),i=o.shift();if(i.multi)throw new et.Schema("Primary key cannot be multi-valued");i.keyPath&&m(r,i.keyPath,i.auto?0:i.keyPath),o.forEach(function(e){if(e.auto)throw new et.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new et.Schema("Index must have a name and cannot be an empty string");m(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new Oe(n,i,o,r)}})}}),this._allTables=Ve,this._createTransaction=function(e,t,n,r){return new H(e,t,n,r)},this._whenReady=function(e){return Qe||At.letThrough?e():new q(function(e,t){if(!ze){if(!Ne)return void t(new et.DatabaseClosed);tt.open().catch(C)}nt.then(e,t)}).then(e)},this.verno=0,this.open=function(){if(ze||Xe)return nt.then(function(){return Ge?Nt(Ge):tt});He&&(rt._stackHolder=k()),ze=!0,Ge=null,Qe=!1;var e=me,n=null;return q.race([rt,new q(function(e,r){if(!Ue)throw new et.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=ot?Ue.open(t):Ue.open(t,Math.round(10*tt.verno));if(!o)throw new et.MissingAPI("IndexedDB API not available");o.onerror=xe(r),o.onblocked=oe(ve),o.onupgradeneeded=oe(function(e){if(n=o.transaction,ot&&!tt._allowEmptyDB){o.onerror=Ie,n.abort(),o.result.close();var i=Ue.deleteDatabase(t);i.onsuccess=i.onerror=oe(function(){r(new et.NoSuchDatabase("Database "+t+" doesnt exist"))})}else{n.onerror=xe(r);var a=e.oldVersion>Math.pow(2,62)?0:e.oldVersion;f(a/10,n,r,o)}},r),o.onsuccess=oe(function(){if(n=null,Xe=o.result,Ht.push(tt),ot)de();else if(Xe.objectStoreNames.length>0)try{pe(qe,Xe.transaction(Pe(Xe.objectStoreNames),$e))}catch(e){}Xe.onversionchange=oe(function(e){tt._vcFired=!0,tt.on("versionchange").fire(e)}),it||"__dbnames"===t||Pt.dbnames.put({name:t}).catch(C),e()},r)})]).then(function(){return Ye=[],q.resolve(be.vip(tt.on.ready.fire)).then(function e(){if(Ye.length>0){var t=Ye.reduce(F,C);return Ye=[],q.resolve(be.vip(t)).then(e)}})}).finally(function(){Ye=null}).then(function(){return ze=!1,tt}).catch(function(e){try{n&&n.abort()}catch(e){}return ze=!1,tt.close(),Ge=e,Nt(Ge)}).finally(function(){Qe=!0,e()})},this.close=function(){var e=Ht.indexOf(tt);if(e>=0&&Ht.splice(e,1),Xe){try{Xe.close()}catch(e){}Xe=null}Ne=!1,Ge=new et.DatabaseClosed,ze&&ge(Ge),nt=new q(function(e){me=e}),rt=new q(function(e,t){ge=t})},this.delete=function(){var e=arguments.length>0;return new q(function(n,r){function o(){tt.close();var e=Ue.deleteDatabase(t);e.onsuccess=oe(function(){it||Pt.dbnames.delete(t).catch(C),n()}),e.onerror=xe(r),e.onblocked=ve}if(e)throw new et.InvalidArgument("Arguments not allowed in db.delete()");ze?nt.then(o):o()})},this.backendDB=function(){return Xe},this.isOpen=function(){return null!==Xe},this.hasBeenClosed=function(){return Ge&&Ge instanceof et.DatabaseClosed},this.hasFailed=function(){return null!==Ge},this.dynamicallyOpened=function(){return ot},this.name=t,o(this,{tables:{get:function(){return Ce(Ve).map(function(e){return Ve[e]})}}}),this.on=ye(this,"populate","blocked","versionchange",{ready:[F,C]}),this.on.ready.subscribe=c(this.on.ready.subscribe,function(e){return function(t,n){be.vip(function(){Qe?(Ge||q.resolve().then(t),n&&e(t)):Ye?(Ye.push(t),n&&e(t)):(e(t),n||e(function e(){tt.on.ready.unsubscribe(t),tt.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=U.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){function r(){return q.resolve().then(function(){var t=At.transless||At,r=tt._createTransaction(e,a,qe,o),i={trans:r,transless:t};o?r.idbtrans=o.idbtrans:r.create(),n.constructor===ht&&ae();var s,u=q.follow(function(){if(s=n.call(r,r))if(s.constructor===dt){var e=se.bind(null,null);s.then(e,e)}else"function"==typeof s.next&&"function"==typeof s.throw&&(s=Te(s))},i);return(s&&"function"==typeof s.then?q.resolve(s).then(function(e){return r.active?e:Nt(new et.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return s})).then(function(e){return o&&r._resolve(),r._completion.then(function(){return e})}).catch(function(e){return r._reject(e),Nt(e)})})}var o=At.trans;o&&o.db===tt&&e.indexOf("!")===-1||(o=null);var i=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{var a=t.map(function(e){var t=e instanceof K?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||e==$e)e=$e;else{if("rw"!=e&&e!=Ze)throw new et.InvalidArgument("Invalid transaction mode: "+e);e=Ze}if(o){if(o.mode===$e&&e===Ze){if(!i)throw new et.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach(function(e){if(o&&o.storeNames.indexOf(e)===-1){if(!i)throw new et.SubTransaction("Table "+e+" not included in parent transaction.");o=null}}),i&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,function(t,n){n(e)}):Nt(e)}return o?o._promise(e,r,"lock"):At.trans?he(At.transless,function(){return tt._whenReady(r)}):tt._whenReady(r)},this.table=function(e){if(!r(Ve,e))throw new et.InvalidTable("Table "+e+" does not exist");return Ve[e]},o(K.prototype,{_trans:function(e,t,n){var r=this._tx||At.trans;return r&&r.db===tt?r===At.trans?r._promise(e,t,n):ie(function(){return r._promise(e,t,n)},{trans:r,transless:At.transless||At}):D(e,[this.name],t)},_idbstore:function(e,t,n){function r(e,n,r){if(r.storeNames.indexOf(o)===-1)throw new et.NotFound("Table"+o+" not part of transaction");return t(e,n,r.idbtrans.objectStore(o),r)}var o=this.name;return this._trans(e,r,n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore($e,function(t,r,o){var i=o.get(e);i.onerror=xe(r),i.onsuccess=oe(function(){t(n.hook.reading.fire(i.result))},r)}).then(t)},where:function(e){if("string"==typeof e)return new V(this,e);if(Re(e))return new V(this,"["+e.join("+")+"]");var t=Ce(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})&&e.keyPath.every(function(e){return t.indexOf(e)>=0})})[0];if(n&&qt!==Ft)return this.where(n.name).equals(n.keyPath.map(function(t){return e[t]}));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var r=this.schema.idxByName,o=t.reduce(function(t,n){return[t[0]||r[n],t[0]||!r[n]?fe(t[1],function(t){return""+v(t,n)==""+e[n]}):t[1]]},[null,null]),i=o[0];return i?this.where(i.name).equals(e[i.keyPath]).filter(o[1]):n?this.filter(o[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new X(new V(this,Re(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new X(new V(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&_e(n,t),this.schema.instanceTemplate=n;var o=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var o in t)if(r(t,o))try{n[o]=t[o]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),e},defineClass:function(e){return this.mapToClass(be.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===C?this._idbstore(Ze,function(t,n,r,o){t(W(r,o,e,!1,C))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(Ze,function(r,o,i){if(!i.keyPath&&!n.schema.primKey.auto&&!t)throw new et.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&t)throw new et.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var a,s,u=function(e){0===c.length?r(e):o(new P(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,f=n;if(n.hook.creating.fire===C&&n.hook.updating.fire===C){s=J(c);for(var h=0,p=e.length;h<p;++h)a=t?i.put(e[h],t[h]):i.put(e[h]),a.onerror=s;a.onerror=J(c,u),a.onsuccess=ke(u)}else{var m=t||i.keyPath&&e.map(function(e){return v(e,i.keyPath)}),g=m&&d(m,function(t,n){return null!=t&&[t,e[n]]}),y=m?f.where(":id").anyOf(m.filter(function(e){return null!=e})).modify(function(){this.value=g[this.primKey],g[this.primKey]=null}).catch(O,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],o=m.length-1;o>=0;--o){var i=m[o];(null==i||g[i])&&(n.push(e[o]),t&&r.push(i),null!=i&&(g[i]=null))}return n.reverse(),t&&r.reverse(),f.bulkAdd(n,r)}).then(function(e){var t=m[m.length-1];return null!=t?t:e}):f.bulkAdd(e);y.then(u).catch(P,function(e){c=c.concat(e.failures),u()}).catch(o)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(Ze,function(o,i,a,s){function u(e){0===d.length?o(e):i(new P(n.name+".bulkAdd(): "+d.length+" of "+h+" operations failed",d))}if(!a.keyPath&&!n.schema.primKey.auto&&!t)throw new et.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&t)throw new et.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return o();var c,l,f,d=[],h=e.length;if(r!==C){var g,y=a.keyPath;l=J(d,null,!0),f=Se(null),p(function(){for(var n=0,o=e.length;n<o;++n){g={onerror:null,onsuccess:null};var i=t&&t[n],u=e[n],d=t?i:y?v(u,y):void 0,h=r.call(g,d,u,s);null==d&&null!=h&&(y?(u=w(u),m(u,y,h)):i=h),c=null!=i?a.add(u,i):a.add(u),c._hookCtx=g,n<o-1&&(c.onerror=l,g.onsuccess&&(c.onsuccess=f));
}},function(e){throw g.onerror&&g.onerror(e),e}),c.onerror=J(d,u,!0),c.onsuccess=Se(u)}else{l=J(d);for(var b=0,_=e.length;b<_;++b)c=t?a.add(e[b],t[b]):a.add(e[b]),c.onerror=l;c.onerror=J(d,u),c.onsuccess=ke(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(Ze,function(r,o,i,a){var s={onsuccess:null,onerror:null};if(n!==C){var u=null!=t?t:i.keyPath?v(e,i.keyPath):void 0,c=n.call(s,u,e,a);null==u&&null!=c&&(i.keyPath?m(e,i.keyPath,c):t=c)}try{var l=null!=t?i.add(e,t):i.add(e);l._hookCtx=s,l.onerror=Ae(o),l.onsuccess=Se(function(t){var n=i.keyPath;n&&m(e,n,t),r(t)})}catch(e){throw s.onerror&&s.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;if(r!==C||o!==C){var i=this.schema.primKey.keyPath,a=void 0!==t?t:i&&v(e,i);return null==a?this.add(e):(e=w(e),this._trans(Ze,function(){return n.where(":id").equals(a).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):a})},"locked"))}return this._idbstore(Ze,function(n,r,o){var i=void 0!==t?o.put(e,t):o.put(e);i.onerror=xe(r),i.onsuccess=oe(function(t){var r=o.keyPath;r&&m(e,r,t.target.result),n(i.result)})})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(Ze,function(t,n,r){var o=r.delete(e);o.onerror=xe(n),o.onsuccess=oe(function(){t(o.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Ze,function(e,t,n){var r=n.clear();r.onerror=xe(t),r.onsuccess=oe(function(){e(r.result)})})},update:function(e,t){if("object"!=typeof t||Re(t))throw new et.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Re(e))return this.where(":id").equals(e).modify(t);Ce(t).forEach(function(n){m(e,n,t[n])});var n=v(e,this.schema.primKey.keyPath);return void 0===n?Nt(new et.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),o(H.prototype,{_lock:function(){return l(!At.global),++this._reculock,1!==this._reculock||At.global||(At.lockOwnerFor=this),this},_unlock:function(){if(l(!At.global),0===--this._reculock)for(At.global||(At.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{he(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&At.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(l(!this.idbtrans),!e&&!Xe)switch(Ge&&Ge.name){case"DatabaseClosedError":throw new et.DatabaseClosed(Ge);case"MissingAPIError":throw new et.MissingAPI(Ge.message,Ge);default:throw new et.OpenFailed(Ge)}if(!this.active)throw new et.TransactionInactive;return l(null===this._completion._state),e=this.idbtrans=e||Xe.transaction(Pe(this.storeNames),this.mode),e.onerror=oe(function(n){Ie(n),t._reject(e.error)}),e.onabort=oe(function(n){Ie(n),t.active&&t._reject(new et.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=oe(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this;if(e===Ze&&this.mode!==Ze)return Nt(new et.ReadOnly("Transaction is readonly"));if(!this.active)return Nt(new et.TransactionInactive);if(this._locked())return new q(function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},At])});if(n)return ie(function(){var e=new q(function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var o=new q(function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)});return o._lib=!0,o},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=q.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return e});else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-(1/0)).onsuccess=e)}()}var r=t._waitingFor;return new q(function(n,o){e.then(function(e){return t._waitingQueue.push(oe(n.bind(null,e)))},function(e){return t._waitingQueue.push(oe(o.bind(null,e)))}).finally(function(){t._waitingFor===r&&(t._waitingFor=null)})})},abort:function(){this.active&&this._reject(new et.Abort),this.active=!1},tables:{get:I("Transaction.tables",function(){return Ve})},table:function(e){var t=tt.table(e);return new K(e,t.schema,this)}}),o(V.prototype,function(){function e(e,t,n){var r=e instanceof V?new X(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new X(e,function(){return Fe.only("")}).limit(0)}function n(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function o(e,t,n,r,o,i){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;o(e[u],c)<0&&(s=u)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function i(t,i,a,s){function u(e){c=n(e),l=r(e),f="next"===e?ce:le;var t=a.map(function(e){return{lower:l(e),upper:c(e)}}).sort(function(e,t){return f(e.lower,t.lower)});d=t.map(function(e){return e.upper}),h=t.map(function(e){return e.lower}),p=e,v="next"===e?"":s}var c,l,f,d,h,p,v,m=a.length;if(!a.every(function(e){return"string"==typeof e}))return e(t,Wt);u("next");var g=new X(t,function(){return Fe.bound(d[0],h[m-1]+s)});g._ondirectionchange=function(e){u(e)};var y=0;return g._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var a=l(r);if(i(a,h,y))return!0;for(var s=null,u=y;u<m;++u){var c=o(r,a,d[u],h[u],f,p);null===c&&null===s?y=u+1:(null===s||f(s,c)>0)&&(s=c)}return t(null!==s?function(){e.continue(s+v)}:n),!1}),g}return{between:function(n,r,o,i){o=o!==!1,i=i===!0;try{return ee(n,r)>0||0===ee(n,r)&&(o||i)&&(!o||!i)?t(this):new X(this,function(){return Fe.bound(n,r,!o,!i)})}catch(t){return e(this,Jt)}},equals:function(e){return new X(this,function(){return Fe.only(e)})},above:function(e){return new X(this,function(){return Fe.lowerBound(e,!0)})},aboveOrEqual:function(e){return new X(this,function(){return Fe.lowerBound(e)})},below:function(e){return new X(this,function(){return Fe.upperBound(e,!0)})},belowOrEqual:function(e){return new X(this,function(){return Fe.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,Wt):this.between(t,t+Ft,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):i(this,function(e,t){return 0===e.indexOf(t[0])},[e],Ft)},equalsIgnoreCase:function(e){return i(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=S.apply(We,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.indexOf(e)!==-1},e,"")},startsWithAnyOfIgnoreCase:function(){var e=S.apply(We,arguments);return 0===e.length?t(this):i(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Ft)},anyOf:function(){var n=S.apply(We,arguments),r=re;try{n.sort(r)}catch(t){return e(this,Jt)}if(0===n.length)return t(this);var o=new X(this,function(){return Fe.bound(n[0],n[n.length-1])});o._ondirectionchange=function(e){r="next"===e?re:ue,n.sort(r)};var i=0;return o._addAlgorithm(function(e,t,o){for(var a=e.key;r(a,n[i])>0;)if(++i,i===n.length)return t(o),!1;return 0===r(a,n[i])||(t(function(){e.continue(n[i])}),!1)}),o},notEqual:function(e){return this.inAnyRange([[Kt,e],[e,qt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=S.apply(We,arguments);if(0===t.length)return new X(this);try{t.sort(re)}catch(t){return e(this,Jt)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Kt,t]]},null);return n.push([t[t.length-1],qt]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){function o(e,t){for(var n=0,r=e.length;n<r;++n){var o=e[n];if(ee(t[0],o[1])<0&&ee(t[1],o[0])>0){o[0]=te(o[0],t[0]),o[1]=ne(o[1],t[1]);break}}return n===r&&e.push(t),e}function i(e,t){return l(e[0],t[0])}function a(e){return!d(e)&&!h(e)}if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&re(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",et.InvalidArgument);var s,u=!r||r.includeLowers!==!1,c=r&&r.includeUppers===!0,l=re;try{s=n.reduce(o,[]),s.sort(i)}catch(t){return e(this,Jt)}var f=0,d=c?function(e){return re(e,s[f][1])>0}:function(e){return re(e,s[f][1])>=0},h=u?function(e){return ue(e,s[f][0])>0}:function(e){return ue(e,s[f][0])>=0},p=d,v=new X(this,function(){return Fe.bound(s[0][0],s[s.length-1][1],!u,!c)});return v._ondirectionchange=function(e){"next"===e?(p=d,l=re):(p=h,l=ue),s.sort(i)},v._addAlgorithm(function(e,t,n){for(var r=e.key;p(r);)if(++f,f===s.length)return t(n),!1;return!!a(r)||0!==ee(r,s[f][1])&&0!==ee(r,s[f][0])&&(t(function(){l===re?e.continue(s[f][0]):e.continue(s[f][1])}),!1)}),v},startsWithAnyOf:function(){var n=S.apply(We,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+Ft]})):e(this,"startsWithAnyOf() only works with strings")}}}),o(X.prototype,function(){function t(e,t){e.filter=fe(e.filter,t)}function n(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return fe(r(),t())}:t,e.justLimit=n&&!r}function o(e,t){e.isMatch=fe(e.isMatch,t)}function i(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new et.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function a(e,t){var n=i(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function s(e,t,n,o,i){var s=e.replayFilter?fe(e.filter,e.replayFilter()):e.filter;e.or?function(){function u(){2===++f&&n()}function c(e,n,i){if(!s||s(n,i,u,o)){var a=n.primaryKey,c=""+a;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(a)),r(l,c)||(l[c]=!0,t(e,n,i))}}var l={},f=0;e.or._iterate(c,u,o,i),$(a(e,i),e.algorithm,c,u,o,!e.keysOnly&&e.valueMapper)}():$(a(e,i),fe(e.algorithm,s),t,n,o,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Nt.bind(null,n.error)):n.table._idbstore($e,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,Nt.bind(null,t.error)):t.table._idbstore(Ze,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=fe(t.algorithm,e)},_iterate:function(e,t,n,r){return s(this._ctx,e,t,n,r)},clone:function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&e(r,t),n._ctx=r,n},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read(function(n,r,o){s(t,e,n,r,o)})},count:function(e){var t=this._ctx;if(G(t,!0))return this._read(function(e,n,r){var o=i(t,r),a=t.range?o.count(t.range):o.count();a.onerror=xe(n),a.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var n=0;return this._read(function(e,r,o){s(t,function(){return++n,!1},function(){e(n)},r,o)},e)},sortBy:function(e,t){function n(e,t){return t?n(e[o[t]],t-1):e[i]}function r(e,t){var r=n(e,a),o=n(t,a);return r<o?-s:r>o?s:0}var o=e.split(".").reverse(),i=o[0],a=o.length-1,s="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,n,r){if(we&&"next"===t.dir&&G(t,!0)&&t.limit>0){var o=t.table.hook.reading.fire,a=i(t,r),u=t.limit<1/0?a.getAll(t.range,t.limit):a.getAll(t.range);u.onerror=xe(n),u.onsuccess=ke(o===R?e:function(t){try{e(t.map(o))}catch(e){n(e)}})}else{var c=[];s(t,function(e){c.push(e)},function(){e(c)},n,r)}},e)},offset:function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,G(t)?n(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):n(t,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),n(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(e,n){return t(this._ctx,function(t,r,o){return!e(t.value)||(r(o),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(e){return t(this._ctx,function(t){return e(t.value)}),o(this._ctx,e),this},and:function(e){return this.filter(e)},or:function(e){return new V(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(we&&"next"===t.dir&&G(t,!0)&&t.limit>0)return this._read(function(e,n,r){var o=i(t,r),a=t.limit<1/0?o.getAllKeys(t.range,t.limit):o.getAllKeys(t.range);a.onerror=xe(n),a.onsuccess=ke(e)}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var o={};return t(this._ctx,function(e){var t=e.primaryKey.toString(),n=r(o,t);return o[t]=!0,!n}),this},modify:function(t){var n=this,o=this._ctx,i=o.table.hook,a=i.updating.fire,s=i.deleting.fire;return this._write(function(o,i,u,c){function l(e,t){function n(e){return I.push(e),T.push(o.primKey),d(),!0}E=t.primaryKey;var o={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};if(h.call(o,e,o)!==!1){var i=!r(o,"value");++x,p(function(){var e=i?t.delete():t.update(o.value);e._hookCtx=o,e.onerror=Ae(n),e.onsuccess=Se(function(){++k,d()})},n)}else o.onsuccess&&o.onsuccess(o.value)}function f(e){return e&&(I.push(e),T.push(E)),i(new O("Error modifying one or more objects",I,k,T))}function d(){A&&k+I.length===x&&(I.length>0?f():o(k))}var h;if("function"==typeof t)h=a===C&&s===C?t:function(e){var n=w(e);if(t.call(this,e,this)===!1)return!1;if(r(this,"value")){var o=_(n,this.value),i=a.call(this,o,this.primKey,n,c);i&&(e=this.value,Ce(i).forEach(function(t){m(e,t,i[t])}))}else s.call(this,this.primKey,e,c)};else if(a===C){var g=Ce(t),b=g.length;h=function(e){for(var n=!1,r=0;r<b;++r){var o=g[r],i=t[o];v(e,o)!==i&&(m(e,o,i),n=!0)}return n}}else{var S=t;t=y(S),h=function(n){var r=!1,o=a.call(this,t,this.primKey,w(n),c);return o&&e(t,o),Ce(t).forEach(function(e){var o=t[e];v(n,e)!==o&&(m(n,e,o),r=!0)}),o&&(t=y(S)),r}}var x=0,k=0,A=!1,I=[],T=[],E=null;n.clone().raw()._iterate(l,function(){A=!0,d()},f,u)})},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,o=r!==C;if(!o&&G(t)&&(t.isPrimKey&&!Gt||!n))return this._write(function(e,t,r){var o=xe(t),i=n?r.count(n):r.count();i.onerror=o,i.onsuccess=function(){var a=i.result;p(function(){var t=n?r.delete(n):r.clear();t.onerror=o,t.onsuccess=function(){return e(a)}},function(e){return t(e)})}});var i=o?2e3:1e4;return this._write(function(n,a,s,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!o}).distinct().limit(i).raw(),f=[],d=function(){return l.each(o?function(e,t){f.push([t.primaryKey,t.value])}:function(e,t){f.push(t.primaryKey)}).then(function(){return o?f.sort(function(e,t){return re(e[0],t[0])}):f.sort(re),W(s,u,f,o,r)}).then(function(){var e=f.length;return c+=e,f=[],e<i?c:d()})};n(d())})}}}),e(this,{Collection:X,Table:K,Transaction:H,Version:s,WhereClause:V}),a(),Be.forEach(function(e){e(tt)})}function we(e){if("function"==typeof e)return new e;if(Re(e))return[we(e[0])];if(e&&"object"==typeof e){var t={};return _e(t,e),t}return e}function _e(e,t){return Ce(t).forEach(function(n){var r=we(t[n]);e[n]=r}),e}function Se(e){return oe(function(t){var n=t.target,r=n._hookCtx,o=r.value||n.result,i=r&&r.onsuccess;i&&i(o),e&&e(o)},e)}function xe(e){return oe(function(t){return Ie(t),e(t.target.error),!1})}function ke(e){return oe(function(t){e(t.target.result)})}function Ae(e){return oe(function(t){var n=t.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),Ie(t),e(r),!1})}function Ie(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Te(e){function t(e){return function(t){var n=e(t),r=n.value;return n.done?r:r&&"function"==typeof r.then?r.then(o,i):Re(r)?q.all(r).then(o,i):o(r)}}var n=function(t){return e.next(t)},r=function(t){return e.throw(t)},o=t(n),i=t(r);return t(n)()}function Ee(e,t,n,r,o,i,a){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=a;var s="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+s}function Oe(e,t,n,r){this.name=e,this.primKey=t||new Ee,this.indexes=n||[new Ee],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=d(n,function(e){return[e.name,e]})}function Pe(e){return 1===e.length?e[0]:e}function Le(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}var Ce=Object.keys,Re=Array.isArray,je="undefined"!=typeof self?self:"undefined"!=typeof window?window:t,De=Object.getPrototypeOf,Me={}.hasOwnProperty,Be=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Ue=[].slice,Fe=[].concat,qe="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(b([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return je[e]}).map(function(e){return je[e]}),Ke="undefined"!=typeof Symbol&&Symbol.iterator,Je=Ke?function(e){var t;return null!=e&&(t=e[Ke])&&t.apply(e)}:function(){return null},We={},He="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Ve=function(){return!0},Xe=!new Error("").stack,Ge=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ze=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ye=Ge.concat(ze),Qe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};a(T).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+A(this._e,2))}},toString:function(){return this.name+": "+this.message}}),a(O).from(T),a(P).from(T);var $e=Ye.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ze=T,et=Ye.reduce(function(e,t){function n(e,n){this._e=k(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Qe[t]||r,this.inner=null)}var r=t+"Error";return a(n).from(Ze),e[t]=n,e},{});et.Syntax=SyntaxError,et.Type=TypeError,et.Range=RangeError;var tt=ze.reduce(function(e,t){return e[t+"Error"]=et[t],e},{}),nt=Ye.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=et[t]),e},{});nt.ModifyError=O,nt.DexieError=T,nt.BulkError=P;var rt={},ot=100,it=20,at=7,st=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=je.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),ut=st[0],ct=st[1],lt=st[2],ft=ct&&ct.then,dt=ut&&ut.constructor,ht=st[3],pt=!!lt,vt=!1,mt=lt?function(){lt.then(Y)}:je.setImmediate?n.bind(null,Y):je.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Y(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Y,0)},gt=function(e,t){It.push([e,t]),bt&&(mt(),bt=!1)},yt=!0,bt=!0,wt=[],_t=[],St=null,xt=R,kt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ge,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ge(e[0],e[1])}catch(e){}})}},At=kt,It=[],Tt=0,Et=[],Ot={get:function(){function e(e,r){var o=this,i=!t.global&&(t!==At||n!==Dt);i&&se();var a=new q(function(n,a){V(o,new K(ve(e,t,i),ve(r,t,i),n,a,t))});return He&&z(a,this),a}var t=At,n=Dt;return e.prototype=rt,e},set:function(e){i(this,"then",e&&e.prototype===rt?Ot:{get:function(){return e},set:Ot.set})}};o(q.prototype,{then:Ot,_then:function(e,t){V(this,new K(null,null,e,t,At))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):re(e)}):this.then(null,function(e){return e&&e.name===t?n(e):re(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),re(t)})},stack:{get:function(){if(this._stack)return this._stack;try{vt=!0;var e=G(this,[],it),t=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{vt=!1}}},timeout:function(e,t){var n=this;return e<1/0?new q(function(r,o){var i=setTimeout(function(){return o(new et.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&i(q.prototype,Symbol.toStringTag,"Promise"),kt.env=de(),o(q,{all:function(){var e=S.apply(null,arguments).map(ue);return new q(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(o,i){return q.resolve(o).then(function(n){e[i]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof q)return e;if(e&&"function"==typeof e.then)return new q(function(t,n){e.then(t,n)});var t=new q(rt,!0,e);return z(t,St),t},reject:re,race:function(){var e=S.apply(null,arguments).map(ue);return new q(function(t,n){e.map(function(e){return q.resolve(e).then(t,n)})})},PSD:{get:function(){return At},set:function(e){return At=e}},newPSD:ie,usePSD:he,scheduler:{get:function(){return gt},set:function(e){gt=e}},rejectionMapper:{get:function(){return xt},set:function(e){xt=e}},follow:function(e,t){return new q(function(n,r){return ie(function(t,n){var r=At;r.unhandleds=[],r.onunhandled=n,r.finalize=D(function(){var e=this;ee(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}});var Pt,Lt={awaits:0,echoes:0,id:0},Ct=0,Rt=[],jt=0,Dt=0,Mt=0,Bt="unhandledrejection",Nt=q.reject,Ut="2.0.4",Ft=String.fromCharCode(65535),qt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return Ft}}(),Kt=-(1/0),Jt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wt="String expected.",Ht=[],Vt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Xt=Vt,Gt=Vt,zt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};return x(He,zt),o(be,nt),o(be,{delete:function(e){var t=new be(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new be(e).open().then(function(e){return e.close(),!0}).catch(be.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var t=Le(be.dependencies.indexedDB);return t?new q(function(e,n){var r=t();r.onsuccess=function(t){e(u(t.target.result,0))},r.onerror=xe(n)}).then(e):Pt.dbnames.toCollection().primaryKeys(e)},defineClass:function(){function t(t){t&&e(this,t)}return t},applyStructure:_e,ignoreTransaction:function(e){return At.trans?he(At.transless,e):e()},vip:function(e){return ie(function(){return At.letThrough=!0,e()})},async:function(e){return function(){try{var t=Te(e.apply(this,arguments));return t&&"function"==typeof t.then?t:q.resolve(t)}catch(e){return Nt(e)}}},spawn:function(e,t,n){try{var r=Te(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:q.resolve(r)}catch(e){return Nt(e)}},currentTransaction:{get:function(){return At.trans||null}},waitFor:function(e,t){var n=q.resolve("function"==typeof e?be.ignoreTransaction(e):e).timeout(t||6e4);return At.trans?At.trans.waitFor(n):n},Promise:q,debug:{get:function(){return He},set:function(e){x(e,"dexie"===e?function(){return!0}:zt)}},derive:a,extend:e,props:o,override:c,Events:ye,getByKeyPath:v,setByKeyPath:m,delByKeyPath:g,shallowClone:y,deepClone:w,getObjectDiff:_,asap:f,maxKey:qt,minKey:Kt,addons:[],connections:Ht,MultiModifyError:et.Modify,errnames:$e,IndexSpec:Ee,TableSchema:Oe,dependencies:function(){try{return{indexedDB:je.indexedDB||je.mozIndexedDB||je.webkitIndexedDB||je.msIndexedDB,IDBKeyRange:je.IDBKeyRange||je.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Ut,version:Ut.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),default:be,Dexie:be}),q.rejectionMapper=L,Pt=new be("__dbnames"),Pt.version(1).stores({dbnames:"name"}),function(){var e="Dexie.DatabaseNames";try{void 0!==typeof localStorage&&void 0!==je.document&&(JSON.parse(localStorage.getItem(e)||"[]").forEach(function(e){return Pt.dbnames.put({name:e}).catch(C)}),localStorage.removeItem(e))}catch(e){}}(),be})}).call(t,function(){return this}(),n(1317).setImmediate)},1313:function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return v[p]=r,h(p),p++}function o(e){delete v[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(m)setTimeout(a,0,e);else{var t=v[e];if(t){m=!0;try{i(t)}finally{o(e),m=!1}}}}function s(){h=function(e){t.nextTick(function(){a(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),h=function(n){e.postMessage(t+n,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},h=function(t){e.port2.postMessage(t)}}function f(){var e=g.documentElement;h=function(t){var n=g.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function d(){h=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var h,p=1,v={},m=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():u()?c():e.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?f():d(),y.setImmediate=r,y.clearImmediate=o}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(106))},1317:function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var o="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(1313),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},1318:function(e,t,n,r){e.exports=n(r)},1319:function(e,t,n,r,o,i,a,s,u,c,l){"use strict";function f(e){var t=new p(e),n=h(p.prototype.request,t);return d.extend(n,p.prototype,t),d.extend(n,t),n}var d=n(r),h=n(o),p=n(i),v=n(a),m=f(v);m.Axios=p,m.create=function(e){return f(d.merge(v,e))},m.Cancel=n(s),m.CancelToken=n(u),m.isCancel=n(c),m.all=function(e){return Promise.all(e)},m.spread=n(l),e.exports=m,e.exports.default=m},1320:function(e,t,n,r){"use strict";function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(r);o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e,t=new o(function(t){e=t});return{token:t,cancel:e}},e.exports=o},1321:function(e,t,n,r){"use strict";function o(){this.handlers=[]}var i=n(r);o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},1322:function(e,t,n,r){"use strict";var o=n(r);e.exports=function(e,t,n,r,i){var a=new Error(e);return o(a,t,n,r,i)}},1323:function(e,t,n,r,o,i,a,s,u){"use strict";function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var l=n(r),f=n(o),d=n(i),h=n(a),p=n(s),v=n(u);e.exports=function(e){c(e),e.baseURL&&!p(e.url)&&(e.url=v(e.baseURL,e.url)),e.headers=e.headers||{},e.data=f(e.data,e.headers,e.transformRequest),e.headers=l.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),l.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||h.adapter;return t(e).then(function(t){return c(e),t.data=f(t.data,t.headers,e.transformResponse),t},function(t){return d(t)||(c(e),t&&t.response&&(t.response.data=f(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},1324:function(e,t,n,r){"use strict";var o=n(r);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(o("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},1325:function(e,t,n,r){"use strict";var o=n(r);e.exports=function(e,t,n){return o.forEach(n,function(n){e=n(e,t)}),e}},1326:function(e,t,n,r){"use strict";var o=n(r);e.exports=o.isStandardBrowserEnv()?function(){return{write:function(e,t,n,r,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),o.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),o.isString(r)&&s.push("path="+r),o.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1327:function(e,t,n,r){"use strict";var o=n(r);e.exports=o.isStandardBrowserEnv()?function(){function e(e){
var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return t=e(window.location.href),function(n){var r=o.isString(n)?e(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return function(){return!0}}()},1328:function(e,t,n,r){"use strict";var o=n(r);e.exports=function(e,t){o.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},1329:function(e,t,n,r){"use strict";var o=n(r),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,r,a={};return e?(o.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=o.trim(e.substr(0,r)).toLowerCase(),n=o.trim(e.substr(r+1)),t){if(a[t]&&i.indexOf(t)>=0)return;"set-cookie"===t?a[t]=(a[t]?a[t]:[]).concat([n]):a[t]=a[t]?a[t]+", "+n:n}}),a):a}},1330:function(e,t,n,r,o){"use strict";function i(e){return"[object Array]"===I.call(e)}function a(e){return"[object ArrayBuffer]"===I.call(e)}function s(e){return"undefined"!=typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function c(e){return"string"==typeof e}function l(e){return"number"==typeof e}function f(e){return"undefined"==typeof e}function d(e){return null!==e&&"object"==typeof e}function h(e){return"[object Date]"===I.call(e)}function p(e){return"[object File]"===I.call(e)}function v(e){return"[object Blob]"===I.call(e)}function m(e){return"[object Function]"===I.call(e)}function g(e){return d(e)&&m(e.pipe)}function y(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function b(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function w(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function _(e,t){if(null!==e&&"undefined"!=typeof e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function S(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=S(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)_(arguments[n],e);return t}function x(e,t,n){return _(t,function(t,r){n&&"function"==typeof t?e[r]=k(t,n):e[r]=t}),e}var k=n(r),A=n(o),I=Object.prototype.toString;e.exports={isArray:i,isArrayBuffer:a,isBuffer:A,isFormData:s,isArrayBufferView:u,isString:c,isNumber:l,isObject:d,isUndefined:f,isDate:h,isFile:p,isBlob:v,isFunction:m,isStream:g,isURLSearchParams:y,isStandardBrowserEnv:w,forEach:_,merge:S,extend:x,trim:b}}}));